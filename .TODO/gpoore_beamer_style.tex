\documentclass[xcolor=svgnames,11pt, utf8]{beamer}

%Set up fonts
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{fixltx2e}
\usefonttheme{professionalfonts}
\usepackage[defaultsans]{droidsans}


%for PythonTeX, for when the preamble is precompiled and as
%a result \jobname can get tricky
\def\realjobname{scipy_talk_2013}
\let\jobname\realjobname


%Math stuff
\usepackage{amsmath,amssymb}

%General packages
\usepackage{multicol}
\usepackage{wrapfig}

%For positioning graphics
\usepackage[absolute,overlay]{textpos}
\setlength{\TPHorizModule}{1in}
\setlength{\TPVertModule}{1in}

%%%%%%%%%%%%%%%%%%%%%%%%%%
%Customize Beamer
\useoutertheme{miniframes}
%infolines,miniframes,shadow,sidebar,smoothbars,smoothtree,split,tree
\useinnertheme{rounded}
%rectangles,circles,inmargin,rounded
\newcommand{\colortext}{green!65!black}
\setbeamercolor{structure}{fg=\colortext}
%\setbeamercolor{normal text}{bg=black,fg=black}
\setbeamercolor{alerted text}{fg=orange}
\setbeamercolor{background canvas}{bg=white}
\setbeamercolor{frametitle}{fg=\colortext}
\setbeamercolor{title}{fg=\colortext}
\setbeamercolor{titlelike}{fg=\colortext}
\setbeamercolor{title}{fg=\colortext}
\setbeamercolor{section in sidebar}{fg=brown}
\setbeamercolor{section in sidebar shaded}{fg= grey}
\setbeamercolor{subsection in sidebar}{fg=brown}
\setbeamercolor{subsection in sidebar shaded}{fg= grey}
\setbeamercolor{sidebar}{bg=red}
\setbeamertemplate{blocks}[rounded][shadow=true]
\setbeamercolor{block title}{bg=\colortext,fg=white}
\setbeamercolor{block body}{bg=blue!5,fg=black}

%Get rid of navigation symbols in bottom right
\setbeamertemplate{navigation symbols}{} 
%Get rid of outline references in top bar
%\setbeamertemplate{headline}{}

%If need background images:  \usebackgroundtemplate{\includegraphics{}}

\newcommand{\standardbackground}{\setbeamercolor{background canvas}{bg=white}}
\newcommand{\specialbackground}[2]{\setbeamertemplate{background canvas}[vertical shading][top=#1,bottom=#2]}
\standardbackground


\setbeamertemplate{headline}{%
  \begin{beamercolorbox}{section in head/foot}
  \vskip2pt\insertnavigation{\paperwidth}\vskip2pt
  \end{beamercolorbox}%
}


%Center frame titles
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\makeatletter 
\long\def\beamer@@frametitle[#1]#2{% 
  \beamer@ifempty{#2}{}{% 
    \gdef\insertframetitle{\centering{#2\ifnum\beamer@autobreakcount>0\relax{}\space\usebeamertemplate*{frametitle continuation}\fi}}% 
    \gdef\beamer@frametitle{#2}% 
    \gdef\beamer@shortframetitle{#1}% 
  }% 
} 
\makeatother 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 


\renewcommand{\thefootnote}{\fnsymbol{footnote}} %Make footnotes asterisks
\newcommand{\hide}[1]{}


\usepackage[framemethod=TikZ]{mdframed}
%\usetikzlibrary{shadows}
%\usetikzlibrary{shadows.blur}
\newenvironment{codeblock}[1]{%
    \begin{mdframed}[%
        %frametitle={\textcolor{white}{#1}},
        frametitle={#1\vphantom{fg}},
        skipabove=0.5\baselineskip,
        skipbelow=0.5\baselineskip,
        outerlinewidth=0.5pt,
        frametitlerule=true,
        %frametitlebackgroundcolor=\colortext,
        frametitlebackgroundcolor=green!15,
        frametitlefont=\normalfont,
        frametitleaboveskip=3pt,
        frametitlebelowskip=2pt,
        frametitlerulewidth=0.5pt,
        roundcorner=2pt,
        %shadow=true,
        %shadowcolor=green!10!black!40,
        %shadowsize=5pt
        %apptotikzsetting={\tikzset{mdfshadow/.style=blur shadow={shadow blur steps=5,shadow blur extra rounding=1.3pt,xshift=3pt,yshift=-3pt}}}
    ]%
}{%
    \end{mdframed}
}


\newenvironment{outblock}[1]{%
    \begin{mdframed}[%
        %frametitle={\textcolor{white}{#1}},
        frametitle={#1\vphantom{fg}},
        skipabove=0.5\baselineskip,
        skipbelow=0.5\baselineskip,
        outerlinewidth=0.5pt,
        frametitlerule=true,
        %frametitlebackgroundcolor=\colortext,
        frametitlebackgroundcolor=blue!15,
        frametitlefont=\normalfont,
        frametitleaboveskip=3pt,
        frametitlebelowskip=2pt,
        frametitlerulewidth=0.5pt,
        roundcorner=2pt,
        %shadow=true,
        %shadowcolor=green!10!black!40,
        %shadowsize=5pt
        %apptotikzsetting={\tikzset{mdfshadow/.style=blur shadow={shadow blur steps=5,shadow blur extra rounding=1.3pt,xshift=3pt,yshift=-3pt}}}
    ]%
}{%
    \end{mdframed}
}


\newenvironment{errblock}[1]{%
    \begin{mdframed}[%
        %frametitle={\textcolor{white}{#1}},
        frametitle={#1\vphantom{fg}},
        skipabove=0.5\baselineskip,
        skipbelow=0.5\baselineskip,
        outerlinewidth=0.5pt,
        frametitlerule=true,
        %frametitlebackgroundcolor=red!55!black,
        frametitlebackgroundcolor=red!15,
        frametitlefont=\normalfont,
        frametitleaboveskip=3pt,
        frametitlebelowskip=2pt,
        frametitlerulewidth=0.5pt,
        roundcorner=2pt,
        %shadow=true,
        %shadowcolor=green!10!black!40,
        %shadowsize=5pt
        %apptotikzsetting={\tikzset{mdfshadow/.style=blur shadow={shadow blur steps=5,shadow blur extra rounding=1.3pt,xshift=3pt,yshift=-3pt}}}
    ]%
}{%
    \end{mdframed}
}

\newenvironment{srcblock}[1]{%
    \begin{mdframed}[%
        %frametitle={\textcolor{white}{#1}},
        frametitle={#1\vphantom{fg}},
        skipabove=0.5\baselineskip,
        skipbelow=0.5\baselineskip,
        outerlinewidth=0.5pt,
        frametitlerule=true,
        %frametitlebackgroundcolor=red!55!black,
        frametitlebackgroundcolor=black!7,
        frametitlefont=\normalfont,
        frametitleaboveskip=3pt,
        frametitlebelowskip=2pt,
        frametitlerulewidth=0.5pt,
        roundcorner=2pt,
        %shadow=true,
        %shadowcolor=green!10!black!40,
        %shadowsize=5pt
        %apptotikzsetting={\tikzset{mdfshadow/.style=blur shadow={shadow blur steps=5,shadow blur extra rounding=1.3pt,xshift=3pt,yshift=-3pt}}}
    ]%
}{%
    \end{mdframed}
}


%%%% I usually split off everything up to this point into a precompiled preamble


\usepackage[makestderr, stderrfilename=genericfile, rerun=modified, usefamily={rb,ruby}]{pythontex}
\setpythontexoutputdir{pythontex_files}
\setpygmentspygopt[pycon]{style=friendly}

%create a \restart command to restart PythonTeX sessions
%(can be simpler than naming sessions)
\newcounter{restart}
\newcommand{\restart}{\stepcounter{restart}}
\restartpythontexsession{\arabic{restart}}
\setpythontexworkingdir{.}


\title{Reproducible Documents \\ {\normalsize with} \\ \textbf{PythonTeX} }
\author{Geoffrey M.\ Poore\\ {\footnotesize Department of Physics, Union University}}
\date{\small SciPy 2013 --- June 27}


\begin{document}



\begin{frame}
\maketitle
\end{frame}




\begin{frame}{Reproducible documents}
\begin{itemize}
\item Reproducible workflow
    \begin{itemize}
    \item Results and figures created in reproducible manner
    \item Makefiles, ...
    \end{itemize}
\pause
\item Embedded code
    \begin{itemize}
    \item Code embedded in document
    \item Roots in literate programming
    \item Sweave, knitr, IPython, SageTeX, SympyTeX, Pweave, ...
    \pause
    \item \textbf{PythonTeX}:  emphasize LaTeX integration, usability, performance
    \end{itemize}
\end{itemize}
\end{frame}





\begin{frame}[fragile=singleslide]{Using PythonTeX}
\begin{itemize}
\item Install from CTAN or \url{github.com/gpoore/pythontex}
\item \pygment{latex}{\usepackage{pythontex}}
\item 3-step compile when Python code needs to run (otherwise, just run LaTeX; all output is cached)
    \begin{itemize}
    \item LaTeX $\rightarrow$ saves Python code in auxiliary file
    \item PythonTeX $\rightarrow$ executes Python code
    \item LaTeX $\rightarrow$ brings Python output into document
    \end{itemize}
\end{itemize}
\end{frame}





\begin{frame}[fragile]{Using PythonTeX}
\footnotesize
\begin{codeblock}{LaTeX code}
\begin{pygments}{latex}
\begin{pycode}
from __future__ import division
num = 3571/1597
print(num)
\end{pycode}

\pyc{print(853/17)}

\py{num}

$ \sympy{pi*cos(2)} = \sympy{N(pi*cos(2))} $
\end{pygments}
\end{codeblock}

\begin{outblock}{Output}
\begin{pycode}
from __future__ import division
num = 3571/1597
print(num)
\end{pycode}

\pyc{print(853/17)}

\py{num}

$ \sympy{pi*cos(2)} = \sympy{N(pi*cos(2))} $
\end{outblock}
\end{frame}



\end{document}

