<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="DocOnce Description">
<meta name="keywords" content="doconce short explanation,demos,headlines,section headings,cross referencing,labels,references,index,citations,bibliography,some index entry,main entry subentry,inline tagging,emphasized words,boldface words,verbatim text,inline comments,non-breaking space,nbsp,quotation syntax,non-breaking space,footnotes,doconce format options,command-line options doconce format">

<title>DocOnce Description</title>

<!-- Bootstrap style: bootswatch_readable -->
<link href="http://netdna.bootstrapcdn.com/bootswatch/3.1.1/readable/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->


</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' What Is DocOnce? ', 1, 'what:is:doconce', 'what:is:doconce'),
              (' Demos ', 2, None, '___sec1'),
              (' The DocOnce Markup Language ', 1, None, '___sec2'),
              (' Lists ', 2, None, '___sec3'),
              (' Special lines ', 2, None, '___sec4'),
              (' Heading with title and author(s) ', 2, None, '___sec5'),
              (' Table of contents ', 2, None, '___sec6'),
              (' Section headings ', 2, None, '___sec7'),
              (' Figures ', 2, None, '___sec8'),
              (' Movies ', 2, None, '___sec9'),
              (' The Basic Command ', 3, None, '___sec10'),
              (' MP4, WebM, and Ogg Movies in HTML ', 3, None, '___sec11'),
              (' Movie Handling in Various Formats ', 3, None, '___sec12'),
              (' YouTube and Vimeo Movies ', 3, None, '___sec13'),
              (' Animation Based on Filename Generators ',
               3,
               None,
               '___sec14'),
              (' Copying Computer Code from Source Files ',
               2,
               None,
               '___sec15'),
              (' Inserting the Output from Operating System Commands ',
               2,
               None,
               '___sec16'),
              (' Comments ', 2, None, '___sec17'),
              (' Cross-Referencing ', 2, None, '___sec18'),
              (' Generalized Cross-Referencing ',
               2,
               'manual:genrefs',
               'manual:genrefs'),
              (' A Worked Example ', 3, None, '___sec20'),
              (' Index ', 2, None, '___sec21'),
              (' Tables ', 2, None, '___sec22'),
              (' Admonitions ', 2, None, '___sec23'),
              (' The Box Environment ', 3, None, '___sec24'),
              (' Inline Tagging ', 1, 'inline:tagging', 'inline:tagging'),
              (' Emphasized Words ', 2, None, '___sec26'),
              (' Inline Verbatim Text ', 2, None, '___sec27'),
              (' Links to Web Addresses ', 2, None, '___sec28'),
              (' Links to Mail Addresses ', 2, None, '___sec29'),
              (' Links to Local Files ', 2, None, '___sec30'),
              (' Quotes ', 2, None, '___sec31'),
              (' Non-Breaking Space ', 2, None, '___sec32'),
              (' Horizontal rule ', 2, None, '___sec33'),
              (' Em-dash ', 2, None, '___sec34'),
              (' Ampersand ', 2, None, '___sec35'),
              (' Footnotes ', 2, None, '___sec36'),
              (' Inline Comments ', 2, None, '___sec37'),
              (' Inline Comments for Editing ', 2, None, '___sec38'),
              (' Forced Line Breaks ', 2, None, '___sec39'),
              (' Inline Mathematics ', 2, None, '___sec40'),
              (' Emojis ', 2, None, '___sec41'),
              (' Bibliography/References ', 1, None, '___sec42'),
              (' Importing your data to the Publish database ',
               2,
               None,
               '___sec43'),
              (' Requirements to input data ', 2, None, '___sec44'),
              (' Adding new references to the database ',
               2,
               None,
               '___sec45'),
              (' Exporting the database ', 2, None, '___sec46'),
              (' Referring to publications ', 2, None, '___sec47'),
              (' Specifying the Publish database ', 2, None, '___sec48'),
              (' LaTeX Bibliography Style ', 2, None, '___sec49'),
              (' Exercises, Problems, Projects, and Examples ',
               1,
               None,
               '___sec50'),
              (' Basic Syntax ', 2, None, '___sec51'),
              (' List of Exercises, Problems, and Projects ',
               2,
               None,
               '___sec52'),
              (' Code and Math Blocks ', 1, None, '___sec53'),
              (' Blocks of Verbatim Computer Code ',
               2,
               'sec:verbatim:blocks',
               'sec:verbatim:blocks'),
              (' LaTeX Blocks of Mathematical Text ',
               2,
               'mathtext',
               'mathtext'),
              (' Mathematics for PowerPoint/OpenOffice ',
               3,
               None,
               '___sec56'),
              (' Macros (Newcommands) ', 2, 'newcommands', 'newcommands'),
              (' Guidelines for LaTeX Writers ', 2, None, '___sec58'),
              (' Typesetting of Algorithms ', 2, None, '___sec59'),
              (' Preprocessing and Postprocessing ', 1, None, '___sec60'),
              (' The Preprocess and Mako Preprocessors ',
               2,
               None,
               '___sec61'),
              (' Splitting Documents into Smaller Pieces ',
               2,
               None,
               '___sec62'),
              (' Writing Slides ', 1, None, '___sec63'),
              (' Overview ', 2, None, '___sec64'),
              (' HTML5 Slides ', 2, None, '___sec65'),
              (' Potential Problems ', 3, None, '___sec66'),
              (' LaTeX Beamer Slides ', 2, None, '___sec67'),
              (' Themes ', 3, None, '___sec68'),
              (' Misc ', 1, None, '___sec69'),
              (' Missing Features ', 2, None, '___sec70'),
              (' Emacs DocOnce Formatter ',
               2,
               'emacs:doconce',
               'emacs:doconce'),
              (' Mako Programming ', 1, 'manual:mako', 'manual:mako'),
              (' The Basics of Mako ', 2, None, '___sec73'),
              (' Debugging Python code in Mako ',
               2,
               'mako:py:debugging',
               'mako:py:debugging'),
              (' Example: Executing Python and using SymPy Objects in LaTeX ',
               2,
               None,
               '___sec75'),
              (' Example: Extending Tables to Handle Figures ',
               2,
               'manual:tables:wfigs',
               'manual:tables:wfigs'),
              (' Solution for LaTeX and HTML ', 3, None, '___sec77'),
              (' Generating the Entire Table ', 3, None, '___sec78'),
              (' Generating the Entire Table in a Native Format via Mako ',
               3,
               None,
               '___sec79'),
              (' Generating the Entire Table in a Native Format as a Post Process ',
               3,
               None,
               '___sec80'),
              (' Example: Defining a Theorem Environment ',
               2,
               'manual:theorem:envir',
               'manual:theorem:envir'),
              (' Tools for Writing DocOnce Documents ', 2, None, '___sec82'),
              (' Debugging ', 2, None, '___sec83'),
              (' From DocOnce to Other Formats ',
               1,
               'doconce2formats',
               'doconce2formats'),
              (' Generating a makefile ', 2, None, '___sec85'),
              (' Preprocessing ', 2, None, '___sec86'),
              (' Removal of inline comments ', 2, None, '___sec87'),
              (' Notes ', 2, None, '___sec88'),
              (' Demo of different formats ', 2, None, '___sec89'),
              (' HTML ', 2, None, '___sec90'),
              (' Basics ', 3, None, '___sec91'),
              (' Typesetting of Code ', 3, None, '___sec92'),
              (' Handling of Movies ', 3, None, '___sec93'),
              (' HTML Styles ', 3, None, '___sec94'),
              (' HTML templates ', 3, None, '___sec95'),
              (' The HTML File Collection ', 3, None, '___sec96'),
              (' Filenames ', 3, None, '___sec97'),
              (' Blog Posts ', 2, None, '___sec98'),
              (' Pandoc and Markdown ', 2, None, '___sec99'),
              (' Markdown to HTML conversion ', 3, None, '___sec100'),
              (' Using Pandoc to go from LaTeX to MS Word or HTML ',
               3,
               None,
               '___sec101'),
              (' Strict Markdown ', 3, None, '___sec102'),
              (' GitHub-flavored Markdown ', 3, None, '___sec103'),
              (' MultiMarkdown ', 3, None, '___sec104'),
              (' Strapdown rendering of Markdown text ',
               3,
               None,
               '___sec105'),
              (' LaTeX ', 2, None, '___sec106'),
              (' PDFLaTeX ', 2, None, '___sec107'),
              (' XeLaTeX ', 2, None, '___sec108'),
              (' From PDF to e-book formats ', 2, None, '___sec109'),
              (' Microsoft Word or LibreOffice ', 2, None, '___sec110'),
              (' Plain ASCII Text ', 2, None, '___sec111'),
              (' reStructuredText ', 2, None, '___sec112'),
              (' Sphinx ', 2, None, '___sec113'),
              (' The manual Sphinx procedure ', 3, None, '___sec114'),
              (' Wiki Formats ', 2, None, '___sec115'),
              (' Google Docs ', 2, None, '___sec116'),
              (' Tweaking the DocOnce Output ', 2, None, '___sec117'),
              (' Options for the `doconce` commands ', 1, None, '___sec118'),
              (' `doconce format` command-line options ',
               2,
               None,
               '___sec119'),
              (' Installation of DocOnce and its Dependencies ',
               1,
               'install:doconce',
               'install:doconce'),
              (' DocOnce ', 2, None, '___sec121'),
              (' Dependencies ', 2, None, '___sec122'),
              (' Preprocessors ', 3, None, '___sec123'),
              (' Image file handling ', 3, None, '___sec124'),
              (' Spellcheck ', 3, None, '___sec125'),
              (' Bibliography ', 3, None, '___sec126'),
              (' Ptex2tex for LaTeX Output ', 3, None, '___sec127'),
              (' LaTeX packages ', 3, None, '___sec128'),
              (' reStructuredText (reST) Output ', 3, None, '___sec129'),
              (' Sphinx Output ', 3, None, '___sec130'),
              (' Markdown and Pandoc Output ', 3, None, '___sec131'),
              (' Epydoc Output ', 3, None, '___sec132'),
              (' Analyzing file differences ', 3, None, '___sec133'),
              (' Quick Debian/Ubuntu Install ',
               2,
               'install:debian:script',
               'install:debian:script'),
              (' Basic Parsing Ideas ', 1, None, '___sec135'),
              (' Typesetting of Function Arguments, Return Values, and Variables ',
               2,
               None,
               '___sec136'),
              (' References ', 1, None, '___sec137')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="manual.html">DocOnce Description</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._manual000.html#what:is:doconce" style="font-size: 80%;">What Is DocOnce?</a></li>
     <!-- navigation toc: --> <li><a href="._manual003.html#___sec2" style="font-size: 80%;">The DocOnce Markup Language</a></li>
     <!-- navigation toc: --> <li><a href="._manual014.html#inline:tagging" style="font-size: 80%;">Inline Tagging</a></li>
     <!-- navigation toc: --> <li><a href="._manual014.html#___sec42" style="font-size: 80%;">Bibliography/References</a></li>
     <!-- navigation toc: --> <li><a href="._manual015.html#___sec50" style="font-size: 80%;">Exercises, Problems, Projects, and Examples</a></li>
     <!-- navigation toc: --> <li><a href="._manual016.html#___sec53" style="font-size: 80%;">Code and Math Blocks</a></li>
     <!-- navigation toc: --> <li><a href="._manual019.html#___sec60" style="font-size: 80%;">Preprocessing and Postprocessing</a></li>
     <!-- navigation toc: --> <li><a href="._manual021.html#___sec63" style="font-size: 80%;">Writing Slides</a></li>
     <!-- navigation toc: --> <li><a href="._manual022.html#___sec69" style="font-size: 80%;">Misc</a></li>
     <!-- navigation toc: --> <li><a href="._manual024.html#manual:mako" style="font-size: 80%;">Mako Programming</a></li>
     <!-- navigation toc: --> <li><a href="._manual029.html#doconce2formats" style="font-size: 80%;">From DocOnce to Other Formats</a></li>
     <!-- navigation toc: --> <li><a href="._manual029.html#___sec118" style="font-size: 80%;">Options for the `doconce` commands</a></li>
     <!-- navigation toc: --> <li><a href="._manual030.html#install:doconce" style="font-size: 80%;">Installation of DocOnce and its Dependencies</a></li>
     <!-- navigation toc: --> <li><a href="._manual030.html#___sec135" style="font-size: 80%;">Basic Parsing Ideas</a></li>
     <!-- navigation toc: --> <li><a href="._manual030.html#___sec137" style="font-size: 80%;">References</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0018"></a>
<!-- !split -->

<h2 id="newcommands">Macros (Newcommands)<a name="newcommands"></a></h2>

<p>
DocOnce supports a type of macros via a LaTeX-style <em>newcommand</em>
construction, but only inside mathematical expressions (inline
LaTeX math or LaTeX math blocks, otherwise use Mako functions).

<p>
The newcommands must be defined in a file with name
<code>newcommand_replace.tex</code> are expanded when DocOnce is filtered to
other formats, except for LaTeX (since LaTeX performs the expansion
itself).  Newcommands in files with names <code>newcommands.tex</code> and
<code>newcommands_keep.tex</code> are kept unaltered when DocOnce text is
filtered to other formats, except for the Sphinx format. Since Sphinx
understands LaTeX math, but not newcommands if the Sphinx output is
HTML, it makes most sense to expand all newcommands.  Normally, a user
will put all newcommands that appear in math blocks surrounded by
<code>!bt</code> and <code>!et</code> in <code>newcommands_keep.tex</code> to keep them unchanged, at
least if they contribute to make the raw LaTeX math text easier to
read in the formats that cannot render LaTeX.  Newcommands used
elsewhere throughout the text will usually be placed in
<code>newcommands_replace.tex</code> and expanded by DocOnce.  The definitions of
newcommands in the <code>newcommands*.tex</code> files <em>must</em> appear on a single
line (multi-line newcommands are too hard to parse with regular
expressions).

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Notice.</b>
If you desire a newcommand for the running text, using a Mako function
(written in plain Python) is much more flexible. See
the section <a href="._manual024.html#manual:mako">Mako Programming</a>.
</div>


<h2 id="___sec58">Guidelines for LaTeX Writers <a name="___sec58"></a></h2>

<p>
Any LaTeX syntax is accepted, but if output in the <code>sphinx</code>, <code>pandoc</code>,
<code>mwiki</code>, <code>html</code>, or <code>ipynb</code> formats
is also important, one should follow these rules:

<ul>
 <li> AMS LaTeX mathematics is supported, also for the <code>html</code>, <code>sphinx</code>,
   and <code>ipynb</code> formats.</li>
 <li> Only five equation environments can be used: <code>\[ ... \]</code>,
   <code>equation*</code>, <code>equation</code>, <code>align*</code>, and <code>align</code>.</li>
 <li> Newcommands in mathematical formulas are allowed, but not in
   the running text. Newcommands must be defined in files with names
   <code>newcommands*.tex</code>.</li>
 <li> MediaWiki (<code>mwiki</code>) does not support references to equations.</li>
</ul>

(DocOnce performs extensions to <code>sphinx</code> and other formats such that
labels in <code>align</code> environments work well.)

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Notice.</b>
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure (<code>subfigure</code> package), margin notes, multi-page
tables, example and algorithm environments, code listings in figures, etc.
Other output formats, such as <code>sphinx</code> and <code>html</code>, make it necessary for DocOnce
to only utilze very standard LaTeX-style writing. Correspondingly, the writer
must stick to simple constructs and avoid, for instance,

<ul>
 <li> newcommands outside inline math or LaTeX blocks <button type="button" class="btn btn-primary btn-xs" rel="tooltip" data-placement="top" title="Mako functions written in plain Python or simple Mako variables constitute a much more flexible tool than the LaTeX newcommand construction. Such functions can be used both for the running text and math environments."><a name="link_footnote_3"><a><a href="#def_footnote_3" style="color: white">3</a></button></li>
 <li> more than
   one plot per figure (combine them into one using <code>doconce combine_images</code>),</li>
 <li> floating tables with captions (tables are inlined and explained in the text),</li>
 <li> example environments (use subsection or subsubsection instead),</li>
 <li> algorithms environments (see <em>Typesetting of Algorithms</em> in this manual),</li>
 <li> code listings in figures (use just inline blocks).</li>
</ul>

However, one can use preprocessor if-tests on
the format (typically <code>#if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;)</code>) to
include special code for <code>latex</code> and <code>pdflatex</code> output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of the resulting
PDF document. More tuning can be done by automatic editing of the
<code>.tex</code> produced by DocOnce.

<p>
One can also use the Mako preprocessor to extend DocOnce functionality
and implement, e.g., theorem or example environments (see the section <a href="._manual027.html#manual:theorem:envir">Example: Defining a Theorem Environment</a>) or tables with figures (see the section <a href="._manual026.html#manual:tables:wfigs">Example: Extending Tables to Handle Figures</a>). Many other extensions are also possible.
</div>


<p><a name="def_footnote_3"></a><a href="#link_footnote_3"><b>3:</b></a> Mako functions written in plain Python or simple Mako
variables constitute a much more flexible tool than the LaTeX
newcommand construction. Such functions can be used both for the
running text and math environments.

<h2 id="___sec59">Typesetting of Algorithms <a name="___sec59"></a></h2>

<p>
DocOnce has no support for typesetting of algorithms, while LaTeX
has quite sophisticated support. LaTeX writes need some strategy with
dealing with algorithms in DocOnce: they should be sophisticated
when the output is in LaTeX and they should be readable when the
output is in other formats that have no native support for
algorithms.

<p>
The simplest solution is to use the preprocessor (Preprocess or Mako)
to allow different solutions for different formats.
There are basically three typesetting styles available: LaTeX
algorithm environments, pseudo code in a verbatim block, and
a nested list. A preprocessor variable, say <code>ALG</code> can be used
to select the typesetting. With Mako we can write

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">% if ALG == &#39;latex&#39;:
<span style="color: #408080; font-style: italic"># Write native LaTeX code for the algorithm</span>
% elif ALG == &#39;code&#39;:
<span style="color: #408080; font-style: italic"># Write pseudo code in (e.g.) a python-like style</span>
!bc pycode
if feature in element:
...
!ec
% elif ALG == &#39;list&#39;:
<span style="color: #408080; font-style: italic"># Use lists to express the algorithm</span>
  o if this element has the feature:
    * ...
% endif
</pre></div>
<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._manual017.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._manual019.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    

