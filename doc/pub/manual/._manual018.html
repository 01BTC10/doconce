<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="DocOnce Description">
<meta name="keywords" content="doconce short explanation,demos,headlines,section headings,inline tagging,emphasized words,boldface words,verbatim text,inline comments,non-breaking space,nbsp,quotation syntax,non-breaking space,footnotes,cross referencing,labels,references,index,some index entry,main entry subentry,doconce format options,command-line options doconce format">

<title>DocOnce Description</title>

<!-- Bootstrap style: bootswatch_readable -->
<link href="http://netdna.bootstrapcdn.com/bootswatch/3.1.1/readable/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->


</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' What Is DocOnce? ', 1, 'what:is:doconce', 'what:is:doconce'),
              (' Demos ', 2, None, '___sec1'),
              (' Markup Based on Special Lines ', 1, None, '___sec2'),
              (' Heading with title and author(s) ', 2, None, '___sec3'),
              (' Table of contents ', 2, None, '___sec4'),
              (' Section headings ', 2, None, '___sec5'),
              (' Figures ', 2, None, '___sec6'),
              (' Movies ', 2, None, '___sec7'),
              (' The Basic Command ', 3, None, '___sec8'),
              (' MP4, WebM, and Ogg Movies in HTML ', 3, None, '___sec9'),
              (' Movie Handling in Various Formats ', 3, None, '___sec10'),
              (' YouTube and Vimeo Movies ', 3, None, '___sec11'),
              (' Animation Based on Filename Generators ',
               3,
               None,
               '___sec12'),
              (' Copying Computer Code from Source Files ',
               2,
               None,
               '___sec13'),
              (' Inserting the Output from Operating System Commands ',
               2,
               None,
               '___sec14'),
              (' Comments ', 2, None, '___sec15'),
              (' Tables ', 2, None, '___sec16'),
              (' Lists ', 2, None, '___sec17'),
              (' Inline Tagging ', 1, 'inline:tagging', 'inline:tagging'),
              (' Emphasized Words ', 2, None, '___sec19'),
              (' Inline Verbatim Text ', 2, None, '___sec20'),
              (' Links to Web Addresses ', 2, None, '___sec21'),
              (' Links to Mail Addresses ', 2, None, '___sec22'),
              (' Links to Local Files ', 2, None, '___sec23'),
              (' Quotes ', 2, None, '___sec24'),
              (' Non-Breaking Space ', 2, None, '___sec25'),
              (' Horizontal rule ', 2, None, '___sec26'),
              (' Em-dash ', 2, None, '___sec27'),
              (' Ampersand ', 2, None, '___sec28'),
              (' Footnotes ', 2, None, '___sec29'),
              (' Inline Comments ', 2, None, '___sec30'),
              (' Inline Comments for Editing ', 2, None, '___sec31'),
              (' Forced Line Breaks ', 2, None, '___sec32'),
              (' Inline Mathematics ', 2, None, '___sec33'),
              (' Cross-Referencing ', 2, None, '___sec34'),
              (' Generalized Cross-Referencing ',
               2,
               'manual:genrefs',
               'manual:genrefs'),
              (' A Worked Example ', 3, None, '___sec36'),
              (' Index ', 2, None, '___sec37'),
              (' Emojis ', 2, None, '___sec38'),
              (' Environments ', 1, None, '___sec39'),
              (' Exercises, Problems, Projects, and Examples ',
               2,
               None,
               '___sec40'),
              (' List of Exercises, Problems, and Projects ',
               3,
               None,
               '___sec41'),
              (' Blocks of Verbatim Computer Code ',
               2,
               'sec:verbatim:blocks',
               'sec:verbatim:blocks'),
              (' LaTeX Blocks of Mathematical Text ',
               2,
               'mathtext',
               'mathtext'),
              (' Support of LaTeX Math in Various Output Formats ',
               3,
               None,
               '___sec44'),
              (' Dealing with Mathematics in Formats without LaTeX Math Support ',
               3,
               None,
               '___sec45'),
              (' Mathematics for PowerPoint/OpenOffice ',
               3,
               None,
               '___sec46'),
              (' Macros (Newcommands) ', 2, 'newcommands', 'newcommands'),
              (' Guidelines for LaTeX Writers ', 2, None, '___sec48'),
              (' Typesetting of Algorithms ', 2, None, '___sec49'),
              (' Admonitions ', 2, None, '___sec50'),
              (' Examples on Admonition Types ', 3, None, '___sec51'),
              (' The Box Environment ', 3, None, '___sec52'),
              (' Bibliography (References) ', 1, None, '___sec53'),
              (' Importing your data to the Publish database ',
               2,
               None,
               '___sec54'),
              (' Requirements to input data ', 2, None, '___sec55'),
              (' Adding new references to the database ',
               2,
               None,
               '___sec56'),
              (' Exporting the database ', 2, None, '___sec57'),
              (' Referring to publications ', 2, None, '___sec58'),
              (' Specifying the Publish database ', 2, None, '___sec59'),
              (' LaTeX Bibliography Style ', 2, None, '___sec60'),
              (' Preprocessing and Postprocessing ', 1, None, '___sec61'),
              (' The Preprocess and Mako Preprocessors ',
               2,
               None,
               '___sec62'),
              (' Splitting Documents into Smaller Pieces ',
               2,
               None,
               '___sec63'),
              (' Writing Slides ', 1, None, '___sec64'),
              (' Overview ', 2, None, '___sec65'),
              (' HTML5 Slides ', 2, None, '___sec66'),
              (' Potential Problems ', 3, None, '___sec67'),
              (' LaTeX Beamer Slides ', 2, None, '___sec68'),
              (' Themes ', 3, None, '___sec69'),
              (' Misc ', 1, None, '___sec70'),
              (' Missing Features ', 2, None, '___sec71'),
              (' Emacs DocOnce Formatter ',
               2,
               'emacs:doconce',
               'emacs:doconce'),
              (' Mako Programming ', 1, 'manual:mako', 'manual:mako'),
              (' The Basics of Mako ', 2, None, '___sec74'),
              (' Debugging Python code in Mako ',
               2,
               'mako:py:debugging',
               'mako:py:debugging'),
              (' Example: Executing Python and using SymPy Objects in LaTeX ',
               2,
               None,
               '___sec76'),
              (' Example: Extending Tables to Handle Figures ',
               2,
               'manual:tables:wfigs',
               'manual:tables:wfigs'),
              (' Solution for LaTeX and HTML ', 3, None, '___sec78'),
              (' Generating the Entire Table ', 3, None, '___sec79'),
              (' Generating the Entire Table in a Native Format via Mako ',
               3,
               None,
               '___sec80'),
              (' Generating the Entire Table in a Native Format as a Post Process ',
               3,
               None,
               '___sec81'),
              (' Example: Defining a Theorem Environment ',
               2,
               'manual:theorem:envir',
               'manual:theorem:envir'),
              (' Tools for Writing DocOnce Documents ', 2, None, '___sec83'),
              (' Debugging ', 2, None, '___sec84'),
              (' From DocOnce to Other Formats ',
               1,
               'doconce2formats',
               'doconce2formats'),
              (' Generating a makefile ', 2, None, '___sec86'),
              (' Preprocessing ', 2, None, '___sec87'),
              (' Removal of inline comments ', 2, None, '___sec88'),
              (' Notes ', 2, None, '___sec89'),
              (' Demo of different formats ', 2, None, '___sec90'),
              (' HTML ', 2, None, '___sec91'),
              (' Basics ', 3, None, '___sec92'),
              (' Typesetting of Code ', 3, None, '___sec93'),
              (' Handling of Movies ', 3, None, '___sec94'),
              (' HTML Styles ', 3, None, '___sec95'),
              (' HTML templates ', 3, None, '___sec96'),
              (' The HTML File Collection ', 3, None, '___sec97'),
              (' Filenames ', 3, None, '___sec98'),
              (' Blog Posts ', 2, None, '___sec99'),
              (' Pandoc and Markdown ', 2, None, '___sec100'),
              (' Markdown to HTML conversion ', 3, None, '___sec101'),
              (' Using Pandoc to go from LaTeX to MS Word or HTML ',
               3,
               None,
               '___sec102'),
              (' Strict Markdown ', 3, None, '___sec103'),
              (' GitHub-flavored Markdown ', 3, None, '___sec104'),
              (' MultiMarkdown ', 3, None, '___sec105'),
              (' Strapdown rendering of Markdown text ',
               3,
               None,
               '___sec106'),
              (' LaTeX ', 2, None, '___sec107'),
              (' PDFLaTeX ', 2, None, '___sec108'),
              (' XeLaTeX ', 2, None, '___sec109'),
              (' From PDF to e-book formats ', 2, None, '___sec110'),
              (' Microsoft Word or LibreOffice ', 2, None, '___sec111'),
              (' Plain ASCII Text ', 2, None, '___sec112'),
              (' reStructuredText ', 2, None, '___sec113'),
              (' Sphinx ', 2, None, '___sec114'),
              (' The manual Sphinx procedure ', 3, None, '___sec115'),
              (' Wiki Formats ', 2, None, '___sec116'),
              (' Google Docs ', 2, None, '___sec117'),
              (' Tweaking the DocOnce Output ', 2, None, '___sec118'),
              (' Options for the `doconce` commands ', 1, None, '___sec119'),
              (' `doconce format` command-line options ',
               2,
               None,
               '___sec120'),
              (' Installation of DocOnce and its Dependencies ',
               1,
               'install:doconce',
               'install:doconce'),
              (' DocOnce ', 2, None, '___sec122'),
              (' Dependencies ', 2, None, '___sec123'),
              (' Preprocessors ', 3, None, '___sec124'),
              (' Image file handling ', 3, None, '___sec125'),
              (' Spellcheck ', 3, None, '___sec126'),
              (' Bibliography ', 3, None, '___sec127'),
              (' Ptex2tex for LaTeX Output ', 3, None, '___sec128'),
              (' LaTeX packages ', 3, None, '___sec129'),
              (' reStructuredText (reST) Output ', 3, None, '___sec130'),
              (' Sphinx Output ', 3, None, '___sec131'),
              (' Markdown and Pandoc Output ', 3, None, '___sec132'),
              (' Epydoc Output ', 3, None, '___sec133'),
              (' Analyzing file differences ', 3, None, '___sec134'),
              (' Quick Debian/Ubuntu Install ',
               2,
               'install:debian:script',
               'install:debian:script'),
              (' Basic Parsing Ideas ', 1, None, '___sec136'),
              (' Typesetting of Function Arguments, Return Values, and Variables ',
               2,
               None,
               '___sec137'),
              (' References ', 1, None, '___sec138')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="manual.html">DocOnce Description</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._manual000.html#what:is:doconce" style="font-size: 80%;">What Is DocOnce?</a></li>
     <!-- navigation toc: --> <li><a href="._manual003.html#___sec2" style="font-size: 80%;">Markup Based on Special Lines</a></li>
     <!-- navigation toc: --> <li><a href="._manual010.html#inline:tagging" style="font-size: 80%;">Inline Tagging</a></li>
     <!-- navigation toc: --> <li><a href="._manual013.html#___sec39" style="font-size: 80%;">Environments</a></li>
     <!-- navigation toc: --> <li><a href="._manual017.html#___sec53" style="font-size: 80%;">Bibliography (References)</a></li>
     <!-- navigation toc: --> <li><a href="#___sec61" style="font-size: 80%;">Preprocessing and Postprocessing</a></li>
     <!-- navigation toc: --> <li><a href="._manual020.html#___sec64" style="font-size: 80%;">Writing Slides</a></li>
     <!-- navigation toc: --> <li><a href="._manual021.html#___sec70" style="font-size: 80%;">Misc</a></li>
     <!-- navigation toc: --> <li><a href="._manual023.html#manual:mako" style="font-size: 80%;">Mako Programming</a></li>
     <!-- navigation toc: --> <li><a href="._manual028.html#doconce2formats" style="font-size: 80%;">From DocOnce to Other Formats</a></li>
     <!-- navigation toc: --> <li><a href="._manual028.html#___sec119" style="font-size: 80%;">Options for the `doconce` commands</a></li>
     <!-- navigation toc: --> <li><a href="._manual029.html#install:doconce" style="font-size: 80%;">Installation of DocOnce and its Dependencies</a></li>
     <!-- navigation toc: --> <li><a href="._manual029.html#___sec136" style="font-size: 80%;">Basic Parsing Ideas</a></li>
     <!-- navigation toc: --> <li><a href="._manual029.html#___sec138" style="font-size: 80%;">References</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0018"></a>
<!-- !split -->

<h1 id="___sec61">Preprocessing and Postprocessing <a name="___sec61"></a></h1>

<p>
DocOnce allows preprocessor commands for, e.g., including files,
leaving out text, or inserting special text depending on the format.
These commands are run prior to translation of the document.
After translation, there are <code>doconce split_*</code> commands available
for splitting HTML and Sphinx documents into smaller pieces (web pages)
as a postprocess.

<h2 id="___sec62">The Preprocess and Mako Preprocessors <a name="___sec62"></a></h2>

<p>
Two preprocessors are supported: preprocess
(<a href="http://code.google.com/p/preprocess" target="_self"><tt>http://code.google.com/p/preprocess</tt></a>) and mako
(<a href="http://www.makotemplates.org/" target="_self"><tt>http://www.makotemplates.org/</tt></a>). The former allows include and if-else
statements much like the well-known preprocessor in C and C++ (but it
does not allow sophisticated macro substitutions). The latter
preprocessor is a very powerful template system.  With Mako you can
automatically generate various type of text and steer the generation
through Python code embedded in the DocOnce document. An arbitrary set
of <code>name=value</code> command-line arguments (at the end of the command line)
automatically define Mako variables that are substituted in the document.

<p>
DocOnce will detect if preprocess or Mako commands are used and run
the relevant preprocessor prior to translating the DocOnce source to a
specific format.

<p>
The preprocess and mako programs always have the variable <code>FORMAT</code>
defined as the desired output format of DocOnce (<code>html</code>, <code>latex</code>,
<code>plain</code>, <code>rst</code>, <code>sphinx</code>, <code>epydoc</code>, <code>st</code>).  It is then easy to test on
the value of <code>FORMAT</code> and take different actions for different
formats. Below is an example:

<p>

<!-- code=text (!bc cc) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">First some math:

!bt
\begin{align}
x &amp;= 3
label{x:eq1}\\
y &amp;= 5
label{y:eq1}
\end{align}
!et
Let us now reason about this.

# Sphinx cannot refer to labels in align environments

# #if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;, &quot;html&quot;)
From (\ref{x:eq})-(\ref{y:eq1}) we get that
# #elif FORMAT == &quot;sphinx&quot;
From
!bt
\[ x = 3 \]
!et
and
!bt
\[ y= 5 \]
!et
it follows that
# #else
From the above equations it follows that
# #endif
$x+y$ is 8.
</pre></div>
<p>
A variable <code>DEVICE</code> is also defined. It equals <code>screen</code> by default,
but the command-line argument <code>--device=paper</code> can set <code>DEVICE</code> to
<code>paper</code> (or another value). Testing on <code>DEVICE</code> inside the document
makes it possible to test if the output is on paper media, a sreen,
or a particular device.

<p>
Other user-defined variables for the preprocessor can be set at
the command line as explained in the section <a href="._manual028.html#doconce2formats">From DocOnce to Other Formats</a>.

<p>
More advanced use of mako can include Python code that may automate
the writing of parts of the document.

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>On the type of a Mako variable from the command line.</b>
You define Mako variables as in this example:

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">Terminal&gt; doconce format html mydoc LANG=C NO=4 COMMENTS=False
</pre></div>
<p>
The variable <code>LANG</code> gets the value <code>'C'</code> as a Python string
inside the document. All values are treated as strings, except
if the value is <code>True</code> or <code>False</code> or if it is an integer.
Therefore, <code>NO</code> becomes the integer <code>4</code> and you can test
like <code>% if NO &gt; 4:</code>. The variable <code>COMMENTS</code> gets
the boolean value <code>False</code> and <code>% if not COMMENT:</code> is a positive
test. With Mako such variables set on the command-line
you can easily leave out portions
of the document or choose between different versions of the text
in a very flexible and fine-tuned way.
</div>


<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Advanced setting of Mako variables.</b>
Mako variables can also be run through <code>eval</code> before being
sent to Mako. For example,

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">Terminal&gt; doconce format latex mydoc \
          SOMEVAR=&quot;eval([&#39;problem&#39;, &#39;data&#39;, &#39;results&#39;])&quot;
</pre></div>
<p>
Now, <code>SOMEVAR</code> will be defined by

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">SOMEVAR <span style="color: #666666">=</span> <span style="color: #008000">eval</span>(<span style="color: #BA2121">&quot;[&#39;problem&#39;, &#39;data&#39;, &#39;results&#39;]&quot;</span>)
</pre></div>
<p>
and result in the list <code>['problem', 'data', 'results']</code>.
In a DocOnce document, we can write

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">% for element in SOMEVAR:
 * &quot;`${element}.pdf`&quot;: &quot;http://some.net/pdf/${element}.pdf&quot;
% endfor
</pre></div>
<p>
and produce the following LaTeX code:

<p>

<!-- code=latex (!bc latexcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">\begin</span><span style="color: #008000">{</span>itemize<span style="color: #008000">}</span>
 <span style="color: #008000; font-weight: bold">\item</span> <span style="color: #008000; font-weight: bold">\href</span><span style="color: #008000">{{</span>http://some.net/pdf/problem.pdf<span style="color: #008000">}}{</span><span style="color: #008000; font-weight: bold">\nolinkurl</span><span style="color: #008000">{</span>problem.pdf<span style="color: #008000">}}</span>

 <span style="color: #008000; font-weight: bold">\item</span> <span style="color: #008000; font-weight: bold">\href</span><span style="color: #008000">{{</span>http://some.net/pdf/data.pdf<span style="color: #008000">}}{</span><span style="color: #008000; font-weight: bold">\nolinkurl</span><span style="color: #008000">{</span>data.pdf<span style="color: #008000">}}</span>

 <span style="color: #008000; font-weight: bold">\item</span> <span style="color: #008000; font-weight: bold">\href</span><span style="color: #008000">{{</span>http://some.net/pdf/results.pdf<span style="color: #008000">}}{</span><span style="color: #008000; font-weight: bold">\nolinkurl</span><span style="color: #008000">{</span>results.pdf<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\end</span><span style="color: #008000">{</span>itemize<span style="color: #008000">}</span>
</pre></div>
<p>
Instead of giving the <code>SOMEVAR</code> list on the command line, we can hardcode
it inside the document:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">&lt;%
SOMEVAR = [&#39;problem&#39;, &#39;data&#39;, &#39;results&#39;]
%&gt;
</pre></div>
<p>
The flexibility enabled by Mako variables and statements is one of the
major reasons to adopt DocOnce.
</div>


<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._manual017.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._manual019.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    

