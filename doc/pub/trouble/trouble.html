<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="DocOnce Troubleshooting">

<title>DocOnce Troubleshooting</title>

<!-- Bootstrap style: bootswatch_journal -->
<link href="http://netdna.bootstrapcdn.com/bootswatch/3.1.1/journal/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->


</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' General Problems ', 1, None, '___sec0'),
              (' GitHub gh-pages will not display files starting with a dot or underscore ',
               2,
               None,
               '___sec1'),
              (' GitHub gh-pages will not display files ',
               2,
               None,
               '___sec2'),
              (' A newline in equations (double backslash) becomes single backslash and eats up spaces ',
               2,
               None,
               '___sec3'),
              (' When I set a large portion of text in color, only a part of it becomes colored ',
               2,
               None,
               '___sec4'),
              (' How can I get a native LaTeX example or other environments? ',
               2,
               None,
               '___sec5'),
              (' How can I control the vertical spacing in slides? ',
               2,
               None,
               '___sec6'),
              (' Spellcheck reports mistakes that I cannot find ',
               2,
               None,
               '___sec7'),
              (' Spellcheck reports a lot of mistakes related to LaTeX math ',
               2,
               None,
               '___sec8'),
              (' Text between subexercises are moved ', 2, None, '___sec9'),
              (' DocOnce aborts because of a syntax error that is not an error ',
               2,
               None,
               '___sec10'),
              (' Figure captions are incomplete ', 2, None, '___sec11'),
              (' Problems with boldface and emphasize ', 2, None, '___sec12'),
              (' Links to local directories do not work ',
               2,
               None,
               '___sec13'),
              (' Links are not typeset correctly ', 2, None, '___sec14'),
              (' Inline verbatim code or boldface is not detected when used with a footnote ',
               2,
               None,
               '___sec15'),
              (' Inline verbatim code is not detected ', 2, None, '___sec16'),
              (' Inline verbatim text is not formatted correctly ',
               2,
               None,
               '___sec17'),
              (' Strange non-English characters ', 2, None, '___sec18'),
              (' Wrong Norwegian charcters ', 2, None, '___sec19'),
              (' Too short underlining of reST headlines ',
               2,
               None,
               '___sec20'),
              (' Found `!bt` but no tex blocks extracted (BUG) ',
               2,
               None,
               '___sec21'),
              (' Examples are typset with environment delimiters visible ',
               2,
               None,
               '___sec22'),
              (' Emacs editing does not work properly because of "regexp overflow" ',
               2,
               None,
               '___sec23'),
              (' My machine hangs if I have many movies ',
               2,
               None,
               '___sec24'),
              (' How can I use quotes in a link? ', 2, None, '___sec25'),
              (' Conversion from DocOnce to Google Docs ',
               2,
               None,
               '___sec26'),
              (' Convesion from Google Docs to DocOnce ',
               2,
               None,
               '___sec27'),
              (' Are there any tools for shared online writing of DocOnce documents? ',
               2,
               None,
               '___sec28'),
              (' Examples on seemingly legal syntax that fails ',
               2,
               'trouble:pitfalls',
               'trouble:pitfalls'),
              (' Double bold/italic ', 3, None, '___sec30'),
              (' Mix of bold/italic and math ', 3, None, '___sec31'),
              (' Preprocess/Mako problems ', 1, None, '___sec32'),
              (' List important things to remember when programming Mako ',
               2,
               None,
               '___sec33'),
              (' The Mako preprocessor is seemingly not run ',
               2,
               None,
               '___sec34'),
              (' The Mako preprocessor gives syntax error in Python code ',
               2,
               None,
               '___sec35'),
              (' The Mako preprocessor gives strange error messages ',
               2,
               None,
               '___sec36'),
              (' The Mako preprocessor is fooled by DocOnce text ',
               2,
               None,
               '___sec37'),
              (' The Mako preprocessor claims a variable is undefined ',
               2,
               None,
               '___sec38'),
              (' Something goes wrong in the preprocessing step ',
               2,
               None,
               '___sec39'),
              (' Preprocessor directives do not work ', 2, None, '___sec40'),
              (' Problems with code or Tex Blocks ', 1, None, '___sec41'),
              (' Code or math block errors in reST ', 2, None, '___sec42'),
              (' Strange errors around code or TeX blocks in reST ',
               2,
               None,
               '___sec43'),
              (' Something is wrong with a verbatim code block ',
               2,
               None,
               '___sec44'),
              (' Code/TeX block is not shown in reST format ',
               2,
               None,
               '___sec45'),
              (' Verbatim code blocks inside lists look ugly ',
               2,
               None,
               '___sec46'),
              (' LaTeX code blocks inside lists look ugly ',
               2,
               None,
               '___sec47'),
              (' Problems with reST/Sphinx Output ', 1, None, '___sec48'),
              (' Title level inconsistent ', 2, None, '___sec49'),
              (' Subsection headings appear at the level of sections in the table of contents ',
               2,
               None,
               '___sec50'),
              (' Lists do not appear in .rst files ', 2, None, '___sec51'),
              (' Error message "Undefined substitution..." from reST ',
               2,
               None,
               '___sec52'),
              (' Warning about duplicate link names ', 2, None, '___sec53'),
              (' Inconsistent headings in reST ', 2, None, '___sec54'),
              (' No code environment appears before "bc ipy" blocks ',
               2,
               None,
               '___sec55'),
              (' Problems with LaTeX Output ', 1, None, '___sec56'),
              (' Sphinx and HTML show pygmetized code, but not LaTeX ',
               2,
               None,
               '___sec57'),
              (' LaTeX does not like underscores in URLs ',
               2,
               None,
               '___sec58'),
              (' How can I have unnumbered sections? ', 2, None, '___sec59'),
              (" Error when running latex: You must have 'pygmentize' installed ",
               2,
               None,
               '___sec60'),
              (' Why are the LaTeX section headings smaller than normal? ',
               2,
               None,
               '___sec61'),
              (' I get LaTeX compilation errors about "shadedquoteBlue" in code blocks in exercises ',
               2,
               None,
               '___sec62'),
              (' Can I have LaTeX figures with shadows? ',
               2,
               None,
               '___sec63'),
              (' How can I use my fancy LaTeX environments? ',
               2,
               None,
               '___sec64'),
              (' The LaTeX file does not compile ', 2, None, '___sec65'),
              (' The LaTeX Beamer file does not compile ',
               2,
               None,
               '___sec66'),
              (' Inline verbatim gives error  ', 2, None, '___sec67'),
              (' Errors in figure captions ', 2, None, '___sec68'),
              (' Chapters are ignored ', 2, None, '___sec69'),
              (' I want to tune the top (preamble) of the LaTeX file ',
               2,
               None,
               '___sec70'),
              (' Solution heading in exercise solutions appear after the solution content ',
               2,
               None,
               '___sec71'),
              (' Problems with gwiki Output ', 1, None, '___sec72'),
              (' Strange nested lists in gwiki ', 2, None, '___sec73'),
              (' Lists in gwiki look ugly in the gwiki source ',
               2,
               None,
               '___sec74'),
              (' Problems with HTML Output ', 1, None, '___sec75'),
              (' MathJax formulas are not properly rendered ',
               2,
               None,
               '___sec76'),
              (' How can I change the layout of the HTML page? ',
               2,
               None,
               '___sec77'),
              (' Why do figures look ugly when using HTML templates? ',
               2,
               None,
               '___sec78'),
              (' Problems with reveal/deck HTML5 slides ',
               1,
               None,
               '___sec79'),
              (' Python Online Tutor code does not work in reveal ',
               2,
               None,
               '___sec80'),
              (' Reveal slides are stacked on top of each other ',
               2,
               None,
               '___sec81'),
              (' Reveal slides are moving steadily to the left ',
               2,
               None,
               '___sec82'),
              (' YouTube movies do not work ', 2, None, '___sec83'),
              (' Online Python Tutor does not work ', 2, None, '___sec84')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="trouble.html">DocOnce Troubleshooting</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="#___sec0" style="font-size: 80%;">General Problems</a></li>
     <!-- navigation toc: --> <li><a href="#___sec32" style="font-size: 80%;">Preprocess/Mako problems</a></li>
     <!-- navigation toc: --> <li><a href="#___sec41" style="font-size: 80%;">Problems with code or Tex Blocks</a></li>
     <!-- navigation toc: --> <li><a href="#___sec48" style="font-size: 80%;">Problems with reST/Sphinx Output</a></li>
     <!-- navigation toc: --> <li><a href="#___sec56" style="font-size: 80%;">Problems with LaTeX Output</a></li>
     <!-- navigation toc: --> <li><a href="#___sec72" style="font-size: 80%;">Problems with gwiki Output</a></li>
     <!-- navigation toc: --> <li><a href="#___sec75" style="font-size: 80%;">Problems with HTML Output</a></li>
     <!-- navigation toc: --> <li><a href="#___sec79" style="font-size: 80%;">Problems with reveal/deck HTML5 slides</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<!-- ------------------- main content ---------------------- -->



<div class="jumbotron">
<center><h1>DocOnce Troubleshooting</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen -->

<center>
<b>Hans Petter Langtangen</b> [1, 2]
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<p>
<center><h4>Apr 5, 2015</h4></center> <!-- date -->

<h2>Table of contents</h2>

<p>
<a href="#___sec0"> General Problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec1"> GitHub gh-pages will not display files starting with a dot or underscore </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec2"> GitHub gh-pages will not display files </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec3"> A newline in equations (double backslash) becomes single backslash and eats up spaces </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec4"> When I set a large portion of text in color, only a part of it becomes colored </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec5"> How can I get a native LaTeX example or other environments? </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec6"> How can I control the vertical spacing in slides? </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec7"> Spellcheck reports mistakes that I cannot find </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec8"> Spellcheck reports a lot of mistakes related to LaTeX math </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec9"> Text between subexercises are moved </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec10"> DocOnce aborts because of a syntax error that is not an error </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec11"> Figure captions are incomplete </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec12"> Problems with boldface and emphasize </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec13"> Links to local directories do not work </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec14"> Links are not typeset correctly </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec15"> Inline verbatim code or boldface is not detected when used with a footnote </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec16"> Inline verbatim code is not detected </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec17"> Inline verbatim text is not formatted correctly </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec18"> Strange non-English characters </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec19"> Wrong Norwegian charcters </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec20"> Too short underlining of reST headlines </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec21"> Found <code>!bt</code> but no tex blocks extracted (BUG) </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec22"> Examples are typset with environment delimiters visible </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec23"> Emacs editing does not work properly because of "regexp overflow" </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec24"> My machine hangs if I have many movies </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec25"> How can I use quotes in a link? </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec26"> Conversion from DocOnce to Google Docs </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec27"> Convesion from Google Docs to DocOnce </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec28"> Are there any tools for shared online writing of DocOnce documents? </a><br>
&nbsp; &nbsp; &nbsp; <a href="#trouble:pitfalls"> Examples on seemingly legal syntax that fails </a><br>
<a href="#___sec32"> Preprocess/Mako problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec33"> List important things to remember when programming Mako </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec34"> The Mako preprocessor is seemingly not run </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec35"> The Mako preprocessor gives syntax error in Python code </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec36"> The Mako preprocessor gives strange error messages </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec37"> The Mako preprocessor is fooled by DocOnce text </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec38"> The Mako preprocessor claims a variable is undefined </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec39"> Something goes wrong in the preprocessing step </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec40"> Preprocessor directives do not work </a><br>
<a href="#___sec41"> Problems with code or Tex Blocks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec42"> Code or math block errors in reST </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec43"> Strange errors around code or TeX blocks in reST </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec44"> Something is wrong with a verbatim code block </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec45"> Code/TeX block is not shown in reST format </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec46"> Verbatim code blocks inside lists look ugly </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec47"> LaTeX code blocks inside lists look ugly </a><br>
<a href="#___sec48"> Problems with reST/Sphinx Output </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec49"> Title level inconsistent </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec50"> Subsection headings appear at the level of sections in the table of contents </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec51"> Lists do not appear in .rst files </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec52"> Error message "Undefined substitution..." from reST </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec53"> Warning about duplicate link names </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec54"> Inconsistent headings in reST </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec55"> No code environment appears before "bc ipy" blocks </a><br>
<a href="#___sec56"> Problems with LaTeX Output </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec57"> Sphinx and HTML show pygmetized code, but not LaTeX </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec58"> LaTeX does not like underscores in URLs </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec59"> How can I have unnumbered sections? </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec60"> Error when running latex: You must have 'pygmentize' installed </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec61"> Why are the LaTeX section headings smaller than normal? </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec62"> I get LaTeX compilation errors about "shadedquoteBlue" in code blocks in exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec63"> Can I have LaTeX figures with shadows? </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec64"> How can I use my fancy LaTeX environments? </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec65"> The LaTeX file does not compile </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec66"> The LaTeX Beamer file does not compile </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec67"> Inline verbatim gives error  </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec68"> Errors in figure captions </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec69"> Chapters are ignored </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec70"> I want to tune the top (preamble) of the LaTeX file </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec71"> Solution heading in exercise solutions appear after the solution content </a><br>
<a href="#___sec72"> Problems with gwiki Output </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec73"> Strange nested lists in gwiki </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec74"> Lists in gwiki look ugly in the gwiki source </a><br>
<a href="#___sec75"> Problems with HTML Output </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec76"> MathJax formulas are not properly rendered </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec77"> How can I change the layout of the HTML page? </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec78"> Why do figures look ugly when using HTML templates? </a><br>
<a href="#___sec79"> Problems with reveal/deck HTML5 slides </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec80"> Python Online Tutor code does not work in reveal </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec81"> Reveal slides are stacked on top of each other </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec82"> Reveal slides are moving steadily to the left </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec83"> YouTube movies do not work </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec84"> Online Python Tutor does not work </a><br>
</p>
<p>
<div class="alert alert-block alert-danger alert-text-normal"><b>Disclaimer.</b>
DocOnce has some support for syntax checking.  If you encounter Python
errors while running <code>doconce format</code>, the reason for the error is
most likely a syntax problem in your DocOnce source file. You have to
track down this syntax problem yourself. However, DocOnce applies
regular expressions to a large extent for transforming text, and
regular expressions may sometimes lead to undesired results.
Therefore, there is a chance that legal DocOnce syntax is not
treated properly. The section <a href="#trouble:pitfalls">Examples on seemingly legal syntax that fails</a> gives some examples of what
can go wrong.
</div>


<p>


</div> <!-- end jumbotron -->

<h1 id="___sec0">General Problems </h1>

<h2 id="___sec1">GitHub gh-pages will not display files starting with a dot or underscore </h2>

<p>
This is a typical problem related to publishing either splitted HTML documents
or Sphinx versions of documents on GitHub, using a gh-pages branch.
Filenames starting with a dot (as in <code>._mydoc001.html</code>) or located in
a directory whose name starts with an underscore (as in <code>spninx/_static</code>)
will not be properly shown in HTML if not the root directory of the
gh-pages branch contains a file <code>.nojekyll</code>. This file can be empty.
A typical fix is

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; git checkout gh-pages
Terminal&gt; touch .nojekyll
Terminal&gt; git add .nojekyll
Terminal&gt; git commit -am updates
Terminal&gt; git push origin gh-pages
</pre></div>

<h2 id="___sec2">GitHub gh-pages will not display files </h2>

<p>
A common error is to link to addresses starting with <code>https//github.com</code>
rather than the required <code>http://username.github.io/</code>.

<h2 id="___sec3">A newline in equations (double backslash) becomes single backslash and eats up spaces </h2>

<p>
This is a problem with the Mako preprocessor and files that have beed
edited on Windows.  The remedy is to change the newline character on
Windows to that in Unix:

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; doconce subst &#39;\r\n&#39; &#39;\n&#39; mydoc.do.txt
</pre></div>
<p>
If you work on Windows, you probably have to avoid using the Mako preprocessor
(it is not used unless you use Mako functions, variables, or control
statements).

<h2 id="___sec4">When I set a large portion of text in color, only a part of it becomes colored </h2>

<p>
Although DocOnce features a color inline tag (<code>color</code>),
this tag will most likely fail for large portions
of text. The reason is that this tag, like most other DocOnce
constructions, relies on a regular expression for being detected.
The regular expression searches for opening and closing braces after
the <code>color{red}</code> specification. The closing brace is the first brace
encountered. Therefore, if you have any text containing a right brace
inside the text to be colored, the first right brace will define the
end of the coloring. Here is an example:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">color{blue}{Here is some text
to be typeset in blue.

<span style="color: #000080; font-weight: bold">===== Here is a new subsection =====</span>
<span style="color: #008000">label{sec:subsec}</span>

More text to be typeset in blue, but the right brace in the label
will end the coloring. There is no way out of this except for
moving constructions with braces (`label`, `cite`) out of the
text to be colored.
</pre></div>

<h2 id="___sec5">How can I get a native LaTeX example or other environments? </h2>

<p>
LaTeX writers often lack their favorite environments, but DocOnce
has a way to define such environments, with corresponding typesetting
also for HTML and all other output formats. See the
section <em>User-Defined Environments</em> in the DocOnce manual. It contains
all the details for using a standard example or theorem environment
in LaTeX output.

<h2 id="___sec6">How can I control the vertical spacing in slides? </h2>

<p>
HTML5 and LaTeX slides control the spacings for you. However, sometimes
you really want to add some space. The <code>&lt;linebreak&gt;</code> is effective for
this purpose. For example,

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bblock (large) So - how to be excellent?
&lt;linebreak&gt;
Excellence is not a planned goal - it is the corollary of
deep passion, very much hard (and exciting!)
work, and *thinking constantly about it*.
!eblock
</pre></div>
<p>
is rendered as

<p>
<div class="alert alert-block alert-success alert-text-large"><b>So - how to be excellent?</b>
<br />
Excellence is not a planned goal - it is the corollary of
deep passion, very much hard (and exciting!)
work, and <em>thinking constantly about it</em>.
</div>


<p>
Without <code>&lt;linebreak&gt;</code> the rendering becomes

<p>
<div class="alert alert-block alert-success alert-text-large"><b>So - how to be excellent?</b>
Excellence is not a planned goal - it is the corollary of
deep passion, very much hard (and exciting!)
work, and <em>thinking constantly about it</em>.
</div>


<p>
The <code>&lt;linebreak&gt;</code> is a newline in LaTeX if it has preceding text,
otherwise it is a <code>\vspace{3mm}</code>. In HTML, <code>&lt;linebreak&gt;</code> is <code>&lt;br&gt;</code>.

<h2 id="___sec7">Spellcheck reports mistakes that I cannot find </h2>

<p>
The <code>doconce spellcheck</code> command strips off a lot of text
(math, code, syntax tags) before it starts spellchecking. The
spellchecked text is therefore different from the doconce source!
Fortunately, the file that is actually spellchecked can be examined.
If the spellcheck command is

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">doconce spellcheck mydoc
</pre></div>
<p>
the file <code>tmp_stripped_mydoc.do.txt</code> contains the text that is actually
run through the spellchecker (<code>ispell</code>). Search for the misspelled word there and
try to find it in the doconce source code. Very often, strange misspellings
come from a syntax typo that has led to a strange word in the stripped
version.

<h2 id="___sec8">Spellcheck reports a lot of mistakes related to LaTeX math </h2>

<p>
The <code>doconce spellcheck</code> command should ignore LaTeX math, but if
the dollar signs for inline math are not correct (one missing, for instance),
a lot of math enters the text to be spellchecked. Invoke the
relevant <code>tmp_missing_*</code> file and find the first math-style expression that
is reported as misspelling. Open the corresponding stripped file,
<code>tmp_stripped_*</code>, which is supposed to have all the math stripped
away, and search for the misspelling. When you find it, you will see
that there are math expressions in the stripped file that should not
be there. (Because of wrong begin and end signs around math expressions
ordinary text has instead been stripped away. This way, a missing dollar
sign can lead to hundreds of misspellings.)
Find the problem in the corresponding DocOnce file and correct it.
A similar error can be caused by wrong matching
of equation environments between <code>!bt</code> and <code>!et</code>.

<h2 id="___sec9">Text between subexercises are moved </h2>

<p>
If you insert text between a <code>!esubex</code> and the next <code>!bsubex</code>, this
text is moved before all the subexercises. This is a feature, not a
bug (exercises have certain elements: main text, subexercises, hints,
etc. that are typeset in a specific order, which may be different from
what appears in the DocOnce source file). If you need a comment
between two subexercises, just place the comment at the end of the
previous subexercise.

<h2 id="___sec10">DocOnce aborts because of a syntax error that is not an error </h2>

<p>
DocOnce searches for typical syntax errors and usually aborts the
execution if errors are found. However, it may happen,
especially in verbatim blocks, that DocOnce reports syntax errors
that are not errors. To continue execution, simply add the
<code>--no_abort</code> option on the command line. You may send an email
to the DocOnce author at <code>hpl@simula.no</code> and report the problem.

<h2 id="___sec11">Figure captions are incomplete </h2>

<p>
If only the first part of a figure caption in the DocOnce file is seen
in the target output format, the reason is usually that the caption
occupies multiple lines in the DocOnce file. The figure caption must
be written as <em>one line</em>, at the same line as the FIGURE keyword.

<h2 id="___sec12">Problems with boldface and emphasize </h2>

<p>
Two boldface or emphasize expressions after each other are not rendered
correctly. Merge them into one common expression.

<h2 id="___sec13">Links to local directories do not work </h2>

<p>
Links of the type
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">see the &quot;examples directory&quot;: &quot;src/examples&quot;
</pre></div>
<p>
do not work well. You need to link to a specific HTML file:
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">see the &quot;examples directory&quot;: &quot;src/examples/index.html&quot;
</pre></div>
<p>
We recommend to put all files you link to in a <code>_static</code> directory
if you intend to use the <code>sphinx</code> output. This guarantees that all
your files are collected in the Sphinx directory tree bundle.
With plain <code>html</code> output only, you can link to whatever, but remember
to move all files you link to if you move the primary <code>.html</code> file.

<h2 id="___sec14">Links are not typeset correctly </h2>

<p>
Not all formats will allow formatting of the links. Verbatim words
in links are allowed if the whole link is typeset in verbatim:
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">see the directory &quot;`examples`&quot;: &quot;src/examples/index.html&quot;.
</pre></div>
<p>
However, the following will not be typeset correctly:
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">see the &quot;`examples`&quot;: &quot;src/examples/index.html&quot; directory.
</pre></div>
<p>
The back-ticks must be removed, or the text can be reformulated as
in the line above it.

<h2 id="___sec15">Inline verbatim code or boldface is not detected when used with a footnote </h2>

<p>
There must be a space between the verbatim code (or boldface words)
and the footnote bracket:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">The construction `def f(x,y):`[^whitespace] is standard.

[^whitespace]: Well, a space before the `y` argument, as in `f(x, y)`,
would be the standard.
</pre></div>

<h2 id="___sec16">Inline verbatim code is not detected </h2>

<p>
Make sure there is a space before the first back-tick.

<h2 id="___sec17">Inline verbatim text is not formatted correctly </h2>

<p>
Make sure there is whitespace surrounding the text in back-ticks.

<h2 id="___sec18">Strange non-English characters </h2>

<p>
The former reason for this problem is that DocOnce could only work with latin1
(ISO-8859) encoding and not UTF-8. After May 2013, DocOnce applies
UTF-8 both for HTML and LaTeX.

<p>
Check the encoding of the <code>.do.txt</code> file with the Unix <code>file</code> command
or with
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; doconce guess_encoding myfile.do.txt
</pre></div>
<p>
If the encoding is UTF-8, convert to latin1 using either of
the Unix commands
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; doconce change_encoding utf-8 latin1 myfile.do.txt
Terminal&gt; iconv -f utf-8 -t latin1 myfile.do.txt --output newfile
</pre></div>

<h2 id="___sec19">Wrong Norwegian charcters </h2>

<p>
When DocOnce documents have characters not in the standard ASCII set,
the format of the file must be LATIN1 and not UTF-8. See
the section "Strange non-English characters" above for how to
run <code>doconce change_encoding</code> to change the encoding of the DocOnce file.

<h2 id="___sec20">Too short underlining of reST headlines </h2>

<p>
This may happen if there is a paragraph heading without
proceeding text before some section heading.

<h2 id="___sec21">Found <code>!bt</code> but no tex blocks extracted (BUG) </h2>

<p>
This message points to a bug, but has been resolved by removing blank lines
between the text and the first <code>!bt</code> (inserting the blanks again did not
trigger the error message again...).

<h2 id="___sec22">Examples are typset with environment delimiters visible </h2>

<p>
If you see an Example section containing <code>!bsubex</code>, <code>!bsol</code>, or other
begin and end tags for environments, it means that you have intended
to typeset examples as exercises, but forgotten the command-line
option <code>--examples_as_exercises</code>. The text in the example is typeset
as is unless this option is included.

<h2 id="___sec23">Emacs editing does not work properly because of "regexp overflow" </h2>

<p>
Sometimes the Doonce editing mode (see the section ref{emacs:doconce}) in Emacs
leads to an error message ending with "overflow in regexp matcher".
This error is due to some regular expression used in the DocOnce editing
mode. The remedy is to split the file into smaller pieces and include
the pieces using the <code>preprocess</code> directive <code>#include &quot;piece.do.txt&quot;</code>.
The error message comes with the DocOnce file contains too much text
for Emacs to handle.

<h2 id="___sec24">My machine hangs if I have many movies </h2>

<p>
DocOnce has no limits on the amount of movies. When the output is
in HTML, one big HTML file may contain too many movies (local movie
files or embedded YouTube movies) for the browser to handle.
The remedy is to split the document into smaller pieces by inserting

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!split
</pre></div>
<p>
for every new page. After <code>doconce format html mydoc</code>, run
<code>doconce split_html mydoc.html</code> to get the document split into
a main document <code>mydoc.html</code> and pieces <code>._mydocXXX.html</code>, where
<code>XXX</code> stands for three digits (<code>000</code>, <code>001</code>, <code>002</code>, and so forth).

<h2 id="___sec25">How can I use quotes in a link? </h2>

<p>
Links are typeset inside double quotes, but DocOnce applies double backticks
and double single quotes to typeset quotes, so the right form is

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">&quot;This is a ``link text&#39;&#39; to google&quot;: &quot;http://google.com&quot;.
</pre></div>
<p>
It appears as

<p>
<blockquote>
    <a href="http://google.com" target="_self">This is a &quot;link text&quot; to google</a>.
</blockquote>


<h2 id="___sec26">Conversion from DocOnce to Google Docs </h2>

<ul>
 <li> Transform the DocOnce document to HTML, upload to Google Drive,
   right-click the file and open as Google Docs.</li>
 <li> It might be necessary to adjust formatting, e.g., insert an extra
   line between paragraphs.</li>
 <li> MathJax code is not converted to the Google Docs LaTeX counterpart
   and appears verbatim.</li>
 <li> Pygmentized computer code and admons look fine.</li>
</ul>

<h2 id="___sec27">Convesion from Google Docs to DocOnce </h2>

<ul>
 <li> Save as HTML file and use Pandoc to convert to Markdown.
   Use the <code>--markdown</code> and <code>--md2do_output=</code> options to
   `doconce format to convert to DocOnce.</li>
 <li> Lists in Markdown must be intended.</li>
 <li> Notes in Google Docs become (potentially many) footnotes.
   Some tailored editing is necessary.</li>
</ul>

This solution is not much explored and more text transformations from
Pandoc-generated Markdown is certainly needed.

<h2 id="___sec28">Are there any tools for shared online writing of DocOnce documents? </h2>

<p>
In theory, <a href="http://draftin.com" target="_self"><tt>http://draftin.com</tt></a> and <a href="https://stackedit.io" target="_self"><tt>https://stackedit.io</tt></a>
can be used to share Markdown documents and these can be transform
to and from DocOnce documents. Tested to a little degree, but may
work for very simple documents (sections, lists, code - no labels, refs,
math, admons, code copied from file).
Not all of Extended Markdown is interpreted by DocOnce, and DocOnce
transforms to Panddoc-extended Markdown, not the Extended Markdown
used by these sites.

<h2 id="trouble:pitfalls">Examples on seemingly legal syntax that fails</h2>

<p>
Since DocOnce applies regular expressions to a large extent to translate
the input source to the output format, limitations of regular expressions
may lead to unexpected results. Here are some examples on what can go wrong.

<h3 id="___sec30">Double bold/italic </h3>

<p>
Two strings with bold or emphasize after each other will not work:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #408080; font-style: italic"># Not properly interpreted:</span>
Here is a _bold_ _word_.
<span style="color: #408080; font-style: italic"># This is how to do it:</span>
Here is a _bold word_.

<span style="color: #408080; font-style: italic"># Same with emphasize/italic:</span>
Cannot write *two emphasized* *words*,
but must write *two emphasized words*.
</pre></div>
<p>
The wrong syntax implies that one of the texts inside
bold/italic tags will appear with DocOnce syntax in the output.

<h3 id="___sec31">Mix of bold/italic and math </h3>

<p>
Trying to typeset a mixture of text and mathematics or code in boldface or
emphasized font fails:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">_It is important that $u_1=2$!_
*It is important that `a*b=b*a` in any computer language*.
</pre></div>
<p>
The reason is that boldface or emphasize text cannot contain the
special characters dollar sign and backtick. However, if these
were allowed, the above examples would fail because the underscore
in <code>$u_1=2$</code> would mark the end of the boldface text. Similarly,
the <code>*</code> in <code>a*b</code> would mark the end of the emphasized text.
Such problems are avoided by <em>only using plain text inside
emphasize or boldface tags</em>:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">_It is important that_ $u_1=2$!
*It is important that* `a*b=b*a` *in any computer language*.
</pre></div>
<p>
Another similar example is the mix of <code>&lt;font color=&quot;col&quot;&gt;text&lt;/font&gt;</code> syntax
with braces inside the text. For example,

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">color{blue}{However, here a blue color specification
fails: $\frac{1}{2}\omega^2$.}
</pre></div>
<p>
The text part is interpreted as string with <code>However</code> and lasting up
to the first right brace, which is in <code>\frac{1}</code>. A remedy is, as above,
to only use plain text inside the text part of the color specification
and use a <code>\textcolor</code> command inside the mathematics:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">color{blue}{However, here a blue color specification
fails:} $\textcolor{red}{\frac{1}{2}\omega^2}$.}
</pre></div>
<p>
Mathematics and code in blocks are invisible when inline tagging is
interpreted and translated. Therefore, a specification as follows
works well:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">color{red}{This equation,

!bt
<span style="color: #008000">\begin{equation}</span>
a = b
<span style="color: #008000">label{eq1}</span>
<span style="color: #008000">\end{equation}</span>
!et
is meant to be in red and it works.}
</pre></div>
<p>
The rules are that <code>*text*</code>, <code>_text_</code>, and <code>&lt;font color=&quot;color&quot;&gt;text&lt;/font&gt;</code>
employs a simple rule: <code>text</code> lasts up to the first end-tag
character (<code>*</code>, <code>_</code>, and <code>}</code> above), but code and math blocks
do not count.

<h1 id="___sec32">Preprocess/Mako problems </h1>

<h2 id="___sec33">List important things to remember when programming Mako </h2>

<ul>
 <li> Keep Python code more than a few lines <em>outside</em> of the DocOnce
   file, and use <code># #include</code> to include the code. See
   the <em>Debugging Python code in Mako</em> section in the manual for
   how to do it.</li>
 <li> Do not use continuation character (backslash) in Python code.</li>
 <li> When a Mako error refers to a line in the text, invoke the
   file that Mako sees: <code>tmp_preprocess__mydoc.do.txt</code> if
   the DocOnce file has name <code>mydoc.do.txt</code>.</li>
 <li> Use double <code>##</code> (Mako comment) to comment out Mako calls
   of the form <code>${name...}</code>.</li>
</ul>

<h2 id="___sec34">The Mako preprocessor is seemingly not run </h2>

<p>
If you have lines starting with <code>%</code> inside code segments (for example,
SWIG code or Matlab comment lines), the Mako preprocessor will crash
because it thinks these lines are Mako statements. DocOnce detects
this problem and avoids running Mako.  Examine the output from
DocOnce: warnings are issued if Mako is not run.

<h2 id="___sec35">The Mako preprocessor gives syntax error in Python code </h2>

<p>
The information with respect to syntax errors in Python code is
sparse. It is recommended to move the Python code to separate files
and test it with the ordinary Python interpreter. See the
section <em>Debugging Python code in Mako</em> in the DocOnce manual.

<h2 id="___sec36">The Mako preprocessor gives strange error messages </h2>

<p>
If you to a little syntax error in Mako, the consequences can be
quite unpredictable. Especially, if you forget curly braces around
variables or function calls, the forthcoming text is processed as
part of the Mako command. Pay attention to the line number reported
by Mako: this is the line number after Preprocess has processed
the DocOnce document, so you need to load <code>tmp_preprocess__mydoc.do.txt</code>
and go to the right line in that file to see the Mako problem
(here the DocOnce document is named <code>mydoc.do.txt</code>).

<p>
Look through the specific Mako problems
reported below, and if they do not bring you to a solution of
the problem, search for all occurences of dollar, left curly brace
and check the syntax carefully. Likewise, check the syntax of
Mako if-tests.

<p>
Another widely used technique is to copy out small parts of
the complete document to a separate file and run <code>doconce format</code>.
In this way you can easier see which parts of the document that
work and where the error suddenly appears.

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Tip: Compile your DocOnce document frequently.</b>
The best means against Mako problems is to run <code>doconce format</code>
often. Combined Git, you can take
a <code>git diff</code> to see what you have recently changed and get an idea
what can be wrong.
</div>


<h2 id="___sec37">The Mako preprocessor is fooled by DocOnce text </h2>

<p>
Here are possible problems for Mako:

<ul>
 <li> Strings with <code>'T&lt;%.1f'</code> look as openings of Mako blocks (<code>&lt;%</code>); change
   to <code>'T &lt; %.1f'</code> to avoid this confusion.</li>
</ul>

<h2 id="___sec38">The Mako preprocessor claims a variable is undefined </h2>

<p>
Very often such errors are related to typos when using Mako
variables or functions, or correct yet undesired LaTeX syntax.
For example, \( {\cal O}(\Delta x^2) \) is valid LaTeX, but
the dollar sign and curly braces confuse Mako. Rewrite such
mathematics. It is wise to not use <code>${</code> anywhere in LaTeX mathematics.
Create a newcommand if there are no other possible rewritings.
A known common problem is <code>${}^+$</code> type of indication of superscripts.
A suggested rewrite is <code>$\,{}^+$</code>.

<p>
The error message will ask you to rerun <code>doconce</code> with
<code>--mako_strict_undefined</code>, which will display the variable that is
confusing Mako. Sometimes the variable is printed, sometimes a totally
different name is said to be undefined. This is confusing, because
then you have to use the bisection method below to narrow down the
problem yourself.

<p>
Do not continue to use <code>--mako_strict_undefined</code> while you are
debugging because this variable or a new variable will then always be
undefined in that mode.  Rerun without <code>--mako_strict_undefined</code> to
see if the problem is gone. If not, try the option again, and if no
progress, use <code># #ifdef</code> directives to comment out large portions of
the text and apply a bisection procedure to locate where the Mako
problem is (without <code>--mako_strict_undefined</code>).  A bisection procedure
means that you comment out the last half, find in which half the
problem is, comment out half of that half, find in which half the
problem is, and so on. The procedure converges pretty quickly, even
for large books.

<h2 id="___sec39">Something goes wrong in the preprocessing step </h2>

<p>
You can examine <code>tmp_preprocess__filename</code> and <code>tmp_mako__filename</code>,
where <code>filename</code> is the complete name of the DocOnce file, to see
what the preprocessors actually to and if something is wrong in these
files before DocOnce starts translating the text.
One or both of those files may be missing, but examine the beginning
of the output from DocOnce to see exactly which preprocessors are run
and on which files.

<h2 id="___sec40">Preprocessor directives do not work </h2>

<p>
Make sure the preprocessor instructions, in Preprocess or Mako, have
correct syntax. Also make sure that you do not mix Preprocess and Mako
instructions. DocOnce will then only run Preprocess.

<h1 id="___sec41">Problems with code or Tex Blocks </h1>

<h2 id="___sec42">Code or math block errors in reST </h2>

<p>
First note that a code or math block must come after some plain
sentence (at least for successful output in reST), not directly
after a section/paragraph heading, table, comment, figure, or
movie, because the code or math block is indented and then become
parts of such constructions. Either the block becomes invisible or
error messages are issued.

<p>
Sometimes reST reports an "Unexpected indentation" at the beginning of
a code block. If you see a <code>!bc</code>, which should have been removed when
running <code>doconce format sphinx</code>, it is usually an error in the DocOnce
source, or a problem with the rst/sphinx translator.  Check if the
line before the code block ends in one colon (not two!), a question
mark, an exclamation mark, a comma, a period, or just a newline/space
after text. If not, make sure that the ending is among the
mentioned. Then <code>!bc</code> will most likely be replaced and a double colon
at the preceding line will appear (which is the right way in reST to
indicate a verbatim block of text).

<h2 id="___sec43">Strange errors around code or TeX blocks in reST </h2>

<p>
If <code>idx</code> commands for defining indices are placed inside paragraphs,
and especially right before a code block, the reST translator
(rst and sphinx formats) may get confused and produce strange
code blocks that cause errors when the reST text is transformed to
other formats. The remedy is to define items for the index outside
paragraphs.

<h2 id="___sec44">Something is wrong with a verbatim code block </h2>

<p>
Check first that there is a "normal" sentence right before
the block (this is important for reST and similar
"ASCII-close" formats).

<h2 id="___sec45">Code/TeX block is not shown in reST format </h2>

<p>
A comment right before a code or tex block will treat the whole
block also as a comment. It is important that there is normal
running text right before <code>!bt</code> and <code>!bc</code> environments.

<h2 id="___sec46">Verbatim code blocks inside lists look ugly </h2>

<p>
Read the Section <em>Blocks of Verbatim Computer Code</em> in
the DocOnce manual.  Start the
<code>!bc</code> and <code>!ec</code> tags in column 1 of the file, and be careful with
indenting the surrounding plain text of the list item correctly. If
you cannot resolve the problem this way, get rid of the list and use
paragraph headings instead. In fact, that is what is recommended:
avoid verbatim code blocks inside lists (it makes life easier).

<h2 id="___sec47">LaTeX code blocks inside lists look ugly </h2>

<p>
Same solution as for computer code blocks as described in the
previous paragraph. Make sure the <code>!bt</code> and <code>!et</code> tags are in column 1
and that the rest of the non-LaTeX surrounding text is correctly indented.
Using paragraphs instead of list items is a good idea also here.

<h1 id="___sec48">Problems with reST/Sphinx Output </h1>

<h2 id="___sec49">Title level inconsistent </h2>

<p>
reST does not like jumps in the levels of headings. For example, you cannot
have a <code>===</code> (paragraph) heading after a <code>=======</code> (section) heading without
a <code>====</code> (subsection) heading in between.

<h2 id="___sec50">Subsection headings appear at the level of sections in the table of contents </h2>

<p>
This is a problem that arises if you split a Sphinx document at the
subsection level. Then the subsection is the highest level in that part,
and it will then move up to the section level in the table of contents
(this is done by Sphinx, and DocOnce has no influence on the process).

<p>
After Oct 2014, DocOnce ignores by default the <code>!split</code> commands that the
user has inserted and performs a split at the highest section level,
which means that chapters constitute the parts of the
document, if chapters are present, otherwise the sections represent the
different parts. If this behavior is not desired and the user's <code>!split</code>
commands are to be respected, provide the command-line argument
<code>--sphinx_keep_splits</code> in the <code>doconce format</code> command.

<h2 id="___sec51">Lists do not appear in .rst files </h2>

<p>
Check if you have a comment right above the list. That comment
will include the list if the list is indentend. Remove the comment.

<h2 id="___sec52">Error message "Undefined substitution..." from reST </h2>

<p>
This may happen if there is much inline math in the text. reST cannot
understand inline LaTeX commands and interprets them as illegal code.
Just ignore these error messages.

<h2 id="___sec53">Warning about duplicate link names </h2>

<p>
Link names should be unique, but if (e.g.) "file" is used as link text
several places in a reST file, the links still work. The warning can
therefore be ignorned.

<h2 id="___sec54">Inconsistent headings in reST </h2>

<p>
The <code>rst2*.py</code> and Sphinx converters abort if the headers of sections
are not consistent, i.e., a subsection must come under a section,
and a subsubsection must come under a subsection (you cannot have
a subsubsection directly under a section). Search for <code>===</code>,
count the number of equality signs (or underscores if you use that)
and make sure they decrease by two every time a lower level is encountered.

<h2 id="___sec55">No code environment appears before "bc ipy" blocks </h2>

<p>
The <code>!bc ipy</code> directive behaves this way for <code>sphinx</code> output because
interactive sessions are automatically handled. If this is not
appropriate, shift to <code>!bc cod</code> or another specification of the
verbatim environment.

<h1 id="___sec56">Problems with LaTeX Output </h1>

<h2 id="___sec57">Sphinx and HTML show pygmetized code, but not LaTeX </h2>

<p>
You have to explicitly select the <code>minted</code> environment when running <code>ptex2tex</code>
to get pygmentized computer code in LaTeX:

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; doconce ptex2tex mydoc envir=minted
Terminal&gt; pdflatex -shell-escape mydoc
</pre></div>

<h2 id="___sec58">LaTeX does not like underscores in URLs </h2>

<p>
Suppose you have a URL reference like

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">..which can be found in the file &quot;my_file.txt&quot;:
&quot;http://some.where.net/web/dir/my_file.txt&quot;.
</pre></div>
<p>
LaTeX will stop with a message about a missing dollar sign. The reason
is that underscores in link texts need to be preceded by a backslash.
However, this is incovenient to do in the DocOnce source since the
underscore is misleading in other formats.
The remedy is to format the link text with inline verbatim tags (backticks):
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">..which can be found in the file &quot;`my_file.txt`&quot;:
&quot;http://some.where.net/web/dir/my_file.txt&quot;.
</pre></div>
<p>
Verbatim text in links works fine with underscores.

<h2 id="___sec59">How can I have unnumbered sections? </h2>

<p>
Use the <code>--section_numbering=off</code> option:

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; doconce format pdflatex mydoc --section_numbering=off
</pre></div>

<h2 id="___sec60">Error when running latex: You must have 'pygmentize' installed </h2>

<p>
This message points to the use of the minted style for typesetting verbatim
code. You need to include the <code>-shell-escape</code> command-line argument when
running <code>latex</code> or <code>pdflatex</code>:
<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; latex -shell-escape file mydoc.tex
Terminal&gt; pdflatex -shell-escape file mydoc.tex
</pre></div>
<p>
Using <code>doconce ptex2tex</code> will turn on the minted style if specified as
environment on the command line, while using <code>ptex2tex</code> requires the
preprocessor option <code>-DMINTED</code> to turn on the minted package.
When this package is included, <code>latex</code> or <code>pdflatex</code> runs the
<code>pygmentize</code> program and the <code>shell-escape</code> option is required.

<h2 id="___sec61">Why are the LaTeX section headings smaller than normal? </h2>

<p>
DocOnce inserts a special command to make the headings
more compact:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">\usepackage[compact]{titlesec}
</pre></div>
<p>
as explained in the <a href="http://www.ctex.org/documents/packages/layout/titlesec.pdf" target="_self"><tt>titlesec</tt></a> package documentation.
To retrieve the standard LaTeX headings, comment out this line or remove it:

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; doconce format pdflatex mydoc
Terminal&gt; doconce subst &#39;\\usepack.+\{titlesec\} &#39;&#39; mydoc.p.tex
</pre></div>
<p>
You can easily make the headings even smaller than the normal font
by replacing <code>[compact]</code> by <code>[compact,small]</code> as parameter specification
for <code>titlesec</code>.

<h2 id="___sec62">I get LaTeX compilation errors about "shadedquoteBlue" in code blocks in exercises </h2>

<p>
When using colored boxes for code in LaTeX, a code snippet is needed
in the ordinary running text <em>before</em> code snippets inside exercises, problems,
or projects. This is a kind of bug in DocOnce that is challenging to fix.
It is usually only a problem when writing documents mainly containing
exercises, problems, or projects.

<h2 id="___sec63">Can I have LaTeX figures with shadows? </h2>

<p>
This is easy by including the <code>fancybox</code> and <code>graphicx</code> packages
and wrapping all <code>\includegraphics</code> in a shadow box:

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; doconce format pdflatex mydoc
Terminal&gt; doconce replace \
          &#39;microtype}&#39;, &#39;microtype,fancybox,graphicx}&#39; mydoc.p.tex
Terminal&gt; doconce subst &#39;(\\includegraphics\[.+\}\})&#39; \
          &#39;\\shadowbox{\g&lt;1&gt;}&#39; mydoc.p.tex
</pre></div>

<h2 id="___sec64">How can I use my fancy LaTeX environments? </h2>

<p>
See the section <em>Example: Defining a Theorem Environment</em> in
the DocOnce manual for how to make a custom
theorem environment also in DocOnce, without using implementations
restricted to LaTeX.

<h2 id="___sec65">The LaTeX file does not compile </h2>

<p>
If the problem is undefined control sequence involving
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">\code{...}
</pre></div>
<p>
the cause is usually a verbatim inline text (in back-ticks in the
DocOnce file) spans more than one line. Make sure, in the DocOnce source,
that all inline verbatim text appears on the same line.

<h2 id="___sec66">The LaTeX Beamer file does not compile </h2>

<p>
Make sure you have a <code>!split</code> before every slide heading.

<h2 id="___sec67">Inline verbatim gives error  </h2>

<p>
Check if the inline verbatim contains typical LaTeX commands, e.g.,

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">some text with `\usepackage{mypack}` is difficult because
ptex2tex will replace this by \code{\usepackage{mypack}} and
then replace this by
{\fontsize{10pt}{10pt}\verb!\usepackage{mypack!}}
which is wrong because ptex2tex applies regex that don&#39;t
capture the second }
</pre></div>
<p>
The remedy is to place verbatim LaTeX commands in verbatim
blocks - that is safe.

<p>
<!-- Could have doconce configure file where inline verbatim is -->
<!-- configured to be \fontsize... directly, not via ptex2tex \code{}. -->

<h2 id="___sec68">Errors in figure captions </h2>

<p>
Such errors typically arise from unbalanced curly braces, or dollar signs
around math, and similar LaTeX syntax errors.

<p>
(Note that verbatim font is likely to cause trouble inside figure captions,
but DocOnce will automatically replace verbatim text in back-ticks by
a proper <code>texttt</code> command (since verbatim font constructions does not work
inside figure captions) and precede underscores by backslash.)

<h2 id="___sec69">Chapters are ignored </h2>

<p>
The default LaTeX style is "article". If you chapters in the DocOnce file,
you need to run <code>ptex2tex</code> with the option <code>-DBOOK</code> to set the LaTeX
documentstyle to "book".

<h2 id="___sec70">I want to tune the top (preamble) of the LaTeX file </h2>

<p>
The default preamble generated by DocOnce has several <code>preprocess</code>
options to set the font, type of titlepage, etc., when running
<code>ptex2tex</code> or <code>doconce ptex2tex</code>. However, it is easy to provide
a customized preamble text:

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; doconce format latex mydoc --latex_preamble=mytop.tex
</pre></div>
<p>
If <code>mytop.tex</code> starts with a <code>documentclass</code> specification, the whole
file becomes the complete preamble in <code>mydoc.p.tex</code>, otherwise
<code>mytop.tex</code> is added at the end of the preamble generated by
DocOnce.

<p>
Note also that <code>doconce replace</code> and <code>doconce subst</code> can be used
after <code>doconce formt</code> to tune the LaTeX code in the preamble.
There are comment lines with <code>--- begin preamble ---</code> and
<code>--- end preamble ---</code> in the generate <code>.p.tex</code> file that can be
used to replace the whole preamble by something more suitable.

<h2 id="___sec71">Solution heading in exercise solutions appear after the solution content </h2>

<p>
Sometimes a solution environment with code

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bsol
!bc cod
def f(x):
    return x + 2
!ec
!esol
</pre></div>
<p>
leads to strange behavior (with the <code>shadedquoteBlue</code> verbatim LaTeX
environment: the <b>Solution</b> heading appears after the code
in the solution. This appears to be a LaTeX problem since the
generated LaTeX code has the heading and solution content in the right
order. A working remedy is to insert a text before the code:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Code:
!bsol
!bc cod
def f(x):
    return x + 2
!ec
!esol
</pre></div>

<h1 id="___sec72">Problems with gwiki Output </h1>

<h2 id="___sec73">Strange nested lists in gwiki </h2>

<p>
DocOnce cannot handle nested lists correctly in the gwiki format.
Use nonnested lists or edit the <code>.gwiki</code> file directly.

<h2 id="___sec74">Lists in gwiki look ugly in the gwiki source </h2>

<p>
Because the Google Code wiki format requires all text of a list item to
be on one line, DocOnce simply concatenates lines in that format,
and because of the indentation in the original DocOnce text, the gwiki
output looks somewhat ugly. The good thing is that this gwiki source
is seldom to be looked at - it is the DocOnce source that one edits
further.

<h1 id="___sec75">Problems with HTML Output </h1>

<h2 id="___sec76">MathJax formulas are not properly rendered </h2>

<p>
Here are some common problems:

<ul>
 <li> Two equations cannot have identical label (this error often arises
   from copying and pasting equations)</li>
 <li> <code>[</code> and <code>]</code> brackets must sometimes be replaced by <code>\lbrack</code> and <code>\rbrack</code></li>
</ul>

<h2 id="___sec77">How can I change the layout of the HTML page? </h2>

<p>
The easiest way is to edit the HTML style or the HTML code directly.
However, those edits are overwritten the next time you compile the
DocOnce document to HTML. The edits should therefore be automated
using <code>doconce subst</code> (for regular expression editing) or <code>doconce replace</code>
(for plain text substitution editing) commands in the file where
you run <code>doconce format html mydoc</code>. For example, say you want narrower
gray admonition boxes with a much thicker boundary. The <code>.alert</code>
style must then be changed, more precisely the <code>border</code> and the <code>width</code>
specification:

<p>

<!-- code=bash (!bc shcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">doconce replace <span style="color: #BA2121">&#39;border:1px&#39;</span> <span style="color: #BA2121">&#39;border:11px&#39;</span> mydoc.html
doconce replace <span style="color: #BA2121">&#39;width: 75%;&#39;</span> <span style="color: #BA2121">&#39;width: 35%&#39;</span> mydoc.html
</pre></div>
<p>
Another way to control the layout is to copy the style in the HTML
file into a <code>.css</code> file, edit that file as you like, and provide the
file as part of the compilation using the <code>--css=mystyle.css</code>
flag.

<p>
The standard of way of completely controlling the HTML format is to
use an HTML template. The DocOnce source is then the body of text
(leave out <code>TITLE:</code> to get HTML without a header and footer). The
<code>--html_template=filename</code> command-line option will then embed the
DocOnce text in the specified template file, where you can use style
sheets and desired constructs in the header and footer.  The template
can have "slots" for a title (<code>%(title)s</code>), a date (<code>%(date)s</code>), and
the main body of text (<code>%(main)s</code>).  For typesetting code, <code>pygments</code>
is used (if installed) and can be turned off by <code>--no_pygments_html</code>
(leaving code in gray boxes).

<p>
The easiest way is to get fancy layouts in HTML is to
use the <code>sphinx</code> format and one its many themes.

<h2 id="___sec78">Why do figures look ugly when using HTML templates? </h2>

<p>
The HTML header that DocOnce generates contain special styles for
figure captions and the horizontal rule above figures. When using
templates these styles are not defined, resulting in a rule that
spans the width and a centered caption. Changing the appearance
of the rule and caption can either be done by inserting styles or
simply by automatic editing of the HTML code in a little shell script:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">doconce replace &#39;&lt;p class=&quot;caption&quot;&gt;&#39; \
 &#39;&lt;p style=&quot;width: 50%; font-style: italic; color: blue&quot;&gt;&#39; mydoc.html
doconce replace &#39;&lt;hr class=&quot;figure&quot;&gt;&#39; \
 &#39;&lt;hr style=&quot;width: 50%&quot;&gt;&#39; mydoc.html
</pre></div>

<h1 id="___sec79">Problems with reveal/deck HTML5 slides </h1>

<h2 id="___sec80">Python Online Tutor code does not work in reveal </h2>

<p>
Use the Chrome browser (the code does not work in Firefox in combination
with reveal HTML5, but it works in plain HTML).

<h2 id="___sec81">Reveal slides are stacked on top of each other </h2>

<p>
This problem can be caused by having a <code>!bblock</code> environment crossing two
slides because of a forgotten <code>!eblock</code> on the first slide.
To locate the problematic slides, copy chunks of slides to a new file,
compile, and inspect. This will reveal the problematic chunk.

<h2 id="___sec82">Reveal slides are moving steadily to the left </h2>

<p>
This seems to be a problem when one has used the mouse to scroll down
on a slide and continue to use the right arrow for moving to the
next slide. Click on the arrow in the slide instead of using the arrow key.

<h2 id="___sec83">YouTube movies do not work </h2>

<p>
They do not work in reveal or deck unless the Chrome browser is used.
Usually the HTML5 slides work best in Firefox.

<h2 id="___sec84">Online Python Tutor does not work </h2>

<p>
Seems to be a problem with reveal slides. The <em>Forward</em> button is not
clickable.

<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    

