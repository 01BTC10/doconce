
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DocOnce: Document Once, Include Anywhere &mdash; DocOnce: Document Once, Include Anywhere</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>

        <script src="http://sagecell.sagemath.org/static/jquery.min.js"></script>
        <script src="http://sagecell.sagemath.org/static/embedded_sagecell.js"></script>

        <script>sagecell.makeSagecell({inputLocation: ".sage"});</script>

        <style type="text/css">
                .sagecell .CodeMirror-scroll {
                        overflow-y: hidden;
                        overflow-x: auto;
                }
                .sagecell .CodeMirror {
                        height: auto;
                }
        </style>

    
    <link rel="top" title="DocOnce: Document Once, Include Anywhere" href="index.html" />
    <link rel="prev" title="DocOnce: Document Once, Include Anywhere" href="index.html" />
 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="DocOnce: Document Once, Include Anywhere"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DocOnce: Document Once, Include Anywhere</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="doconce-document-once-include-anywhere">
<h1>DocOnce: Document Once, Include Anywhere<a class="headerlink" href="#doconce-document-once-include-anywhere" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Hans Petter Langtangen</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">Oct 27, 2015</td>
</tr>
</tbody>
</table>
<div class="section" id="some-doconce-features">
<h2>Some DocOnce Features<a class="headerlink" href="#some-doconce-features" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first">Strong support for texts with much math and code.</p>
</li>
<li><p class="first">Same source can produce a variety of output formats:</p>
<ul class="simple">
<li><a class="reference external" href="http://hplgit.github.com/teamods/writing_reports/_static/report_4printing.pdf">traditional LaTeX B/W documents for printing</a></li>
<li><a class="reference external" href="http://hplgit.github.com/teamods/writing_reports/_static/report.pdf">color LaTeX PDF documents</a></li>
<li><a class="reference external" href="http://hplgit.github.com/teamods/writing_reports/_static/report_4phone.pdf">color LaTeX PDF documents for viewing on small phones</a></li>
<li><a class="reference external" href="http://hplgit.github.com/teamods/writing_reports/_static/sphinx-fenics_minimal1/report.html">Sphinx HTML documents with 20+ different designs</a></li>
<li><a class="reference external" href="http://hplgit.github.com/teamods/writing_reports/_static/report.html">Plain HTML</a>, <a class="reference external" href="http://hplgit.github.com/teamods/writing_reports/_static/report_bootstrap_bluegray.html">Boostrap HTML</a>, or with a <a class="reference external" href="http://hplgit.github.com/teamods/writing_reports/_static/report_vagrant.html">template</a>, or with <a class="reference external" href="http://hplgit.github.com/teamods/writing_reports/_static/report_github_minimal.html">another template</a>, or <a class="reference external" href="http://hplgit.github.com/teamods/writing_reports/_static/report_solarized3_light.html">solarized</a></li>
<li>HTML for <a class="reference external" href="http://doconce-report-demo.blogspot.no/">Google</a> or <a class="reference external" href="http://doconcereportdemo.wordpress.com/">Wordpress</a> blog posts</li>
<li><a class="reference external" href="http://doconcedemo.shoutwiki.com/wiki/DocOnce_demo_page">MediaWiki</a> (Wikipedia, Wikibooks, etc)</li>
<li>Markdown</li>
<li>IPython notebook</li>
</ul>
<p>Other formats include plain untagged text (for email),
Creole wiki (for Bitbucket wikis), Google wiki (for Googlecode),
reStructuredText, and Epytext.</p>
</li>
<li><p class="first">Integration with Mako enables use of variables, functions, if-tests,
and loops to parameterize the text and generate various versions of
the text for different purposes.</p>
</li>
<li><p class="first">Computer code can be copied directly from parts of source code files.</p>
</li>
<li><p class="first">Running text can quickly be edited to slide formats (reveal.js and deck.js,
based on HTML5+CSS3).</p>
</li>
<li><p class="first">Special exercise environments with support for hints, answers,
subexercises, etc.</p>
</li>
<li><p class="first">Automatic inline embedding of YouTube and Vimeo movies.</p>
</li>
<li><p class="first">Good support for admonitions in various LaTeX and HTML styles
for warnings, questions, hints, remarks, summaries, etc.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="what-does-doconce-look-like">
<h2>What Does DocOnce Look Like?<a class="headerlink" href="#what-does-doconce-look-like" title="Permalink to this headline">¶</a></h2>
<p>DocOnce text looks like ordinary text (much like Markdown <a class="footnote-reference" href="#markdown-input" id="id1">[1]</a>),
but there
are some almost invisible text constructions that allow you to control
the formating. Here are some examples.</p>
<blockquote>
<div><ul class="simple">
<li>Bullet lists automatically arise from lines starting with <code class="docutils literal"><span class="pre">*</span></code>,
or <code class="docutils literal"><span class="pre">o</span></code> if the list is to be enumerated.</li>
<li><em>Emphasized words</em> are surrounded by <code class="docutils literal"><span class="pre">*</span></code>. <strong>Words in boldface</strong>
are surrounded by underscores.</li>
<li>Words from computer code are enclosed in backticks and
then typeset <code class="docutils literal"><span class="pre">verbatim</span> <span class="pre">(in</span> <span class="pre">a</span> <span class="pre">monospace</span> <span class="pre">font)</span></code>.</li>
<li>Section and paragraph headings are recognied special
decorating characters (<code class="docutils literal"><span class="pre">=</span></code> or <code class="docutils literal"><span class="pre">_</span></code>) before and after the heading.
The length of the decoration determines the level of the
section.</li>
<li>Blocks of computer code are included by surrounding the blocks with
<code class="docutils literal"><span class="pre">!bc</span></code> (begin code) and <code class="docutils literal"><span class="pre">!ec</span></code> (end code) tags on separate lines.</li>
<li>Blocks of computer code can also be imported from source files.</li>
<li>Blocks of LaTeX mathematics are included by surrounding the blocks
with <code class="docutils literal"><span class="pre">!bt</span></code> (begin TeX) and <code class="docutils literal"><span class="pre">!et</span></code> (end TeX) tags on separate lines.</li>
<li>There is support for both LaTeX and text-like inline mathematics
such that formulas make sense also when not rendered by LaTeX
or MathJax.</li>
<li>Figures and movies with captions, simple tables,
URLs with links, index list, labels and references are supported.
YouTube and Vimeo videos are automatically embedded in web documents.</li>
<li>The abstract of a document starts with <em>Abstract</em> as paragraph
heading, and all text up to the next heading makes up the abstract,</li>
<li>Special comment lines are not visible in the output.</li>
<li>Comments to authors can be inserted throughout the text and
made visible or invisible as desired.</li>
<li>There is an exercise environment with many advanced features.</li>
<li>With a preprocessor, Preprocess or Mako, one can include other
documents (files), large portions of text can be defined in or out
of the text, and tailored format-specific constructs can easily be
included. With Mako a single text can output its program examples
in two or more languages.</li>
</ul>
</div></blockquote>
<table class="docutils footnote" frame="void" id="markdown-input" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>In fact, DocOnce allows basic
<a class="reference external" href="https://guides.github.com/features/mastering-markdown/">GitHub/extended Markdown syntax</a> as input. This is attractive for newcomers from Markdown or
writers who also write Markdown documents (or uses Markdown frequently at
GitHub).</td></tr>
</tbody>
</table>
<div class="section" id="what-can-doconce-be-used-for">
<h3>What Can DocOnce Be Used For?<a class="headerlink" href="#what-can-doconce-be-used-for" title="Permalink to this headline">¶</a></h3>
<p>LaTeX is ideal for articles, thesis, and books, but the PDF files does
not look fresh and modern on tablets and phones or big computer
screens. For the latter type of media you need HTML-based documents
with strong support for nice layouts. Tools like
Sphinx, Markdown, or plain HTML with Bootstrap are then more
appropriate than LaTeX, but involves a very different syntax.
DocOnce lets you write one text in one place and then generate
the most appropriate language for the media you want to target.
DocOnce also
has many extra features for supporting large documents with much code and
mathematics, not found in any of other publishing tool.</p>
</div>
<div class="section" id="basic-syntax">
<h3>Basic Syntax<a class="headerlink" href="#basic-syntax" title="Permalink to this headline">¶</a></h3>
<p>Here is an example of some simple text written in the DocOnce format:</p>
<div class="highlight-text"><div class="highlight"><pre>======= First a Section Heading with 7 = Characters =======

===== Then a Subsection Heading with 5 = Characters =====

=== Finally a Subsubection Heading with 3 = Characters ===

You can also have paragraphs with a paragraph heading surrounded
by double underscores are the beginning of a line.

__This is a paragraph heading.__
And here comes the text.

===== A Subsection with Sample Text =====
label{my:first:sec}

Ordinary text looks like ordinary text, but must always start at the
beginning of lines. Tags used for _boldface_ words, *emphasized*
words, and `computer` words look natural in plain text.  Quotations
appear inside double backticks and double single quotes, as in ``this
example&#39;&#39;.

Below the section title we have a *label*, which can be used to
refer to Section ref{my:first:sec}.
References to equations, such as (ref{myeq1}), work in the same
LaTeX-inspired way.

Lists are typeset as you would do in email,

  * item 1
  * item 2,
    perhaps with a 2nd line
  * item 3

Note the consistent use of indentation (as in Python programming!).
Lists can also have automatically numbered items instead of bullets,

  o item 1
  o item 2
  o item 3,
    but be careful with the indentation of the next lines!

__Hyperlinks.__
URLs with a link word are possible, as in &quot;hpl&quot;: &quot;http://folk.uio.no/hpl&quot;.
If the word is just URL, the URL itself becomes the link name,
as in URL: &quot;tutorial.do.txt&quot;. DocOnce distinguishes between paper
and screen output. In traditional paper output, in PDF generated from LaTeX
generated from DocOnce, the URLs of links appear as footnotes.
With screen output, all links are clickable hyperlinks, except in
the plain text format which does not support hyperlinks.

__Inline comments.__
DocOnce also allows inline comments of the form [name: comment] (with
a space after `name:`), e.g., such as [hpl: here I will make some
remarks to the text]. Inline comments can be removed from the output
by a command-line argument (see Section ref{doconce2formats} for an
example). Inline comments can also be used for detailed editing of
text, much like track changes in word, to illustrate how a text
is revised. (However, for seeing how others have revised the text, I
strongly recommend using Git for version control and running `git diff`
on the appropriate versions, or you can click on differences at
GitHub if the files are hosted there.)

__Footnotes.__ Adding a footnote[^footnote] is also possible.

[^footnote]: The syntax for footnotes is borrowed from Extended Markdown.

__Tables.__
Tables are also written in the plain text way, e.g.,

  |--c--------c-----------c--------|
  |time  | velocity | acceleration |
  |---r-------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|

The characters `c`, `r`, and `l` can be inserted, as illustrated above,
for aligning the headings and the columns (center, right, left).
One can also use `X` for potentially very long text in a column (will be
left-adjusted).

# Lines beginning with # are comment lines.
</pre></div>
</div>
<p>The DocOnce text above results in the following little document:</p>
</div>
</div>
<div class="section" id="first-a-section-heading-with-7-characters">
<h2>First a Section Heading with 7 = Characters<a class="headerlink" href="#first-a-section-heading-with-7-characters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="then-a-subsection-heading-with-5-characters">
<h3>Then a Subsection Heading with 5 = Characters<a class="headerlink" href="#then-a-subsection-heading-with-5-characters" title="Permalink to this headline">¶</a></h3>
<div class="section" id="finally-a-subsubection-heading-with-3-characters">
<h4>Finally a Subsubection Heading with 3 = Characters<a class="headerlink" href="#finally-a-subsubection-heading-with-3-characters" title="Permalink to this headline">¶</a></h4>
<p>You can also have paragraphs with a paragraph heading surrounded
by double underscores are the beginning of a line.</p>
<p><strong>This is a paragraph heading.</strong>
And here comes the text.</p>
</div>
</div>
<div class="section" id="a-subsection-with-sample-text">
<span id="my-first-sec"></span><h3>A Subsection with Sample Text<a class="headerlink" href="#a-subsection-with-sample-text" title="Permalink to this headline">¶</a></h3>
<p>Ordinary text looks like ordinary text, but must always start at the
beginning of lines. Tags used for <strong>boldface</strong> words, <em>emphasized</em>
words, and <code class="docutils literal"><span class="pre">computer</span></code> words look natural in plain text.  Quotations
appear inside double backticks and double single quotes, as in &#8220;this
example&#8221;.</p>
<p>Below the section title we have a <em>label</em>, which can be used to
refer to the section <a class="reference internal" href="#my-first-sec"><span class="std std-ref">A Subsection with Sample Text</span></a>.
References to equations, such as &#8216;<a href="#equation-myeq1">(1)</a>&#8216;, work in the same
LaTeX-inspired way.</p>
<p>Lists are typeset as you would do in email,</p>
<blockquote>
<div><ul class="simple">
<li>item 1</li>
<li>item 2,
perhaps with a 2nd line</li>
<li>item 3</li>
</ul>
</div></blockquote>
<p>Note the consistent use of indentation (as in Python programming!).
Lists can also have automatically numbered items instead of bullets,</p>
<blockquote>
<div><ol class="arabic simple">
<li>item 1</li>
<li>item 2</li>
<li>item 3,
but be careful with the indentation of the next lines!</li>
</ol>
</div></blockquote>
<p><strong>Hyperlinks.</strong>
URLs with a link word are possible, as in <a class="reference external" href="http://folk.uio.no/hpl">hpl</a>.
If the word is just URL, the URL itself becomes the link name,
as in <a class="reference external" href="tutorial.do.txt">tutorial.do.txt</a>. DocOnce distinguishes between paper
and screen output. In traditional paper output, in PDF generated from LaTeX
generated from DocOnce, the URLs of links appear as footnotes.
With screen output, all links are clickable hyperlinks, except in
the plain text format which does not support hyperlinks.</p>
<p><strong>Inline comments.</strong>
DocOnce also allows inline comments of the form [<strong>name 1</strong>: comment] (with
a space after <code class="docutils literal"><span class="pre">name:</span></code>), e.g., such as [<strong>hpl 2</strong>: here I will make some remarks to the text]. Inline comments can be removed from the output
by a command-line argument (see the section <a class="reference internal" href="#doconce2formats"><span class="std std-ref">From DocOnce to Other Formats</span></a> for an
example). Inline comments can also be used for detailed editing of
text, much like track changes in word, to illustrate how a text
is revised. (However, for seeing how others have revised the text, I
strongly recommend using Git for version control and running <code class="docutils literal"><span class="pre">git</span> <span class="pre">diff</span></code>
on the appropriate versions, or you can click on differences at
GitHub if the files are hosted there.)</p>
<p><strong>Footnotes.</strong>
Adding a footnote <a class="footnote-reference" href="#footnote" id="id2">[2]</a> is also possible.</p>
<table class="docutils footnote" frame="void" id="footnote" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>The syntax for footnotes is borrowed from Extended Markdown.</td></tr>
</tbody>
</table>
<p><strong>Tables.</strong>
Tables are also written in the plain text way, e.g.,</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="33%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">time</th>
<th class="head">velocity</th>
<th class="head">acceleration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0.0</td>
<td>1.4186</td>
<td>-5.01</td>
</tr>
<tr class="row-odd"><td>2.0</td>
<td>1.376512</td>
<td>11.919</td>
</tr>
<tr class="row-even"><td>4.0</td>
<td>1.1E+1</td>
<td>14.717624</td>
</tr>
</tbody>
</table>
<p>The characters <code class="docutils literal"><span class="pre">c</span></code>, <code class="docutils literal"><span class="pre">r</span></code>, and <code class="docutils literal"><span class="pre">l</span></code> can be inserted, as illustrated above,
for aligning the headings and the columns (center, right, left).</p>
</div>
<div class="section" id="mathematics">
<h3>Mathematics<a class="headerlink" href="#mathematics" title="Permalink to this headline">¶</a></h3>
<p>Inline mathematics, such as <span class="math">\(\nu = \sin(x)\)</span> is written exactly as in LaTeX:</p>
<div class="highlight-text"><div class="highlight"><pre>$\nu = \sin(x)$
</pre></div>
</div>
<p>Blocks of mathematics are typeset with raw LaTeX, inside
<code class="docutils literal"><span class="pre">!bt</span></code> and <code class="docutils literal"><span class="pre">!et</span></code> (begin TeX, end TeX) directives:</p>
<div class="highlight-text"><div class="highlight"><pre>!bt
\begin{align}
{\partial u\over\partial t} &amp;= \nabla^2 u + f,
label{myeq1}\\
{\partial v\over\partial t} &amp;= \nabla\cdot(q(u)\nabla v) + g
\end{align}
!et
</pre></div>
</div>
<p>The result looks like this:</p>
<div class="math" id="equation-myeq1">
<span class="eqno">(1)</span>\[     {\partial u\over\partial t} = \nabla^2 u + f,\]</div>
<div class="math" id="equation-_auto1">
<span class="eqno">(2)</span>\[     {\partial v\over\partial t} = \nabla\cdot(q(u)\nabla v) + g\]</div>
<p>Of course, such blocks only looks nice in formats with support
for LaTeX mathematics
(this includes <code class="docutils literal"><span class="pre">latex</span></code>, <code class="docutils literal"><span class="pre">pdflatex</span></code>, <code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">sphinx</span></code>, <code class="docutils literal"><span class="pre">ipynb</span></code>, <code class="docutils literal"><span class="pre">pandoc</span></code>,
and <code class="docutils literal"><span class="pre">mwiki</span></code>). Simpler
formats have to just list the raw
LaTeX syntax.</p>
<p>LaTeX writers who adopt DocOnce need to pay attention to the following:</p>
<blockquote>
<div><ul class="simple">
<li>AMS LaTeX mathematics is supported, also for the <code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">sphinx</span></code>,
and <code class="docutils literal"><span class="pre">ipynb</span></code> formats.</li>
<li>Only five equation environments can be used: <code class="docutils literal"><span class="pre">\[</span> <span class="pre">...</span> <span class="pre">\]</span></code>,
<code class="docutils literal"><span class="pre">equation*</span></code>, <code class="docutils literal"><span class="pre">equation</span></code>, <code class="docutils literal"><span class="pre">align*</span></code>, and <code class="docutils literal"><span class="pre">align</span></code>.</li>
<li>Newcommands in mathematical formulas are allowed (but not in
the running text). Newcommands must be defined in files with names
<code class="docutils literal"><span class="pre">newcommands*.tex</span></code>.</li>
<li>MediaWiki (<code class="docutils literal"><span class="pre">mwiki</span></code>) does not support references to equations.
DocOnce has extended Markdown, Sphinx, and HTML to better support
equation referencing (across web pages for example).</li>
<li>Only figures are floating elements in DocOnce, all other elements
(code, tables, algorithms) are <em>inline</em> without numbers or labels
for reference. The reason is that floating elements are in general
not used in web documents, but we made an exception with figures
and movies.</li>
</ul>
</div></blockquote>
<div class="admonition-remark admonition">
<p class="first admonition-title">Remark</p>
<p class="last">Although DocOnce allows user-defined styles in the preamble of LaTeX output,
HTML-based output cannot make use of such styles. If-else constructs for
the preprocessor can be used to allow special LaTeX environments for
LaTeX output and alternative typesetting for other formats, but it is
recommended to stay away from special environments in the text and
write in a simpler fashion. For example, DocOnce has no special construction
for algorithms, so these must be simulated by lists or verbatim blocks.
Other constructions that should be avoided include margin notes, special
tables, and
<code class="docutils literal"><span class="pre">subfigure</span></code> (combine image files to one file instead, via <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">combine_images</span></code>).</p>
</div>
</div>
<div class="section" id="computer-code">
<h3>Computer Code<a class="headerlink" href="#computer-code" title="Permalink to this headline">¶</a></h3>
<p>You can have blocks of computer code, starting and ending with
<code class="docutils literal"><span class="pre">!bc</span></code> and <code class="docutils literal"><span class="pre">!ec</span></code> instructions, respectively.</p>
<div class="highlight-text"><div class="highlight"><pre>!bc pycod
from math import sin, pi
def myfunc(x):
    return sin(pi*x)

import integrate
I = integrate.trapezoidal(myfunc, 0, pi, 100)
!ec
</pre></div>
</div>
<p>Such blocks are formatted as</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sin</span><span class="p">,</span> <span class="n">pi</span>
<span class="k">def</span> <span class="nf">myfunc</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">sin</span><span class="p">(</span><span class="n">pi</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">integrate</span>
<span class="n">I</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">trapezoidal</span><span class="p">(</span><span class="n">myfunc</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>A code block must come after some plain sentence (at least for successful
output to <code class="docutils literal"><span class="pre">sphinx</span></code>, <code class="docutils literal"><span class="pre">rst</span></code>, and formats close to plain text),
not directly after a section/paragraph heading or a table.</p>
<p>Blocks of computer code has <em>named environments</em>, such as <em>pycod</em>. The <em>py</em>
stands for Python and <em>cod</em> indicates a code snippet that cannot be run
without more code. Another example is <em>fpro</em>, <em>f</em> for Fortran and <em>pro</em> for
a complete program that will run as it stands. There is support for
code in C, C++, Fortran, Java, Python, Perl, Ruby, JavaScript, HTML, and LaTeX,</p>
<p>One can also copy computer code directly from files, either the
complete file or specified parts, e.g,</p>
<div class="highlight-text"><div class="highlight"><pre>@@@CODE src/myprog.py fromto: def regression\(@import mymod
</pre></div>
</div>
<p>The copying is based on regular expressions and not on line numbers, which
makes the specifications much more robust during software and document
developing. With the <code class="docutils literal"><span class="pre">&#64;&#64;&#64;CODE</span></code> command,
computer code is never
duplicated in the documentation (important for the principle of
avoiding copying information!) and once the software is updated, the
next compilation of the document is up-to-date.</p>
<p><strong>Inclusion of files.</strong>
Another DocOnce document or any file
can be included by writing <code class="docutils literal"><span class="pre">#</span> <span class="pre">#include</span> <span class="pre">&quot;mynote.do.txt&quot;</span></code>
at the beginning of a line.  DocOnce documents have
extension <code class="docutils literal"><span class="pre">do.txt</span></code>. The <code class="docutils literal"><span class="pre">do</span></code> part stands for doconce, while the
trailing <code class="docutils literal"><span class="pre">.txt</span></code> denotes a text document so that editors gives you
plain text editing capabilities.</p>
</div>
<div class="section" id="macros-newcommands-cross-references-index-and-bibliography">
<span id="newcommands"></span><h3>Macros (Newcommands), Cross-References, Index, and Bibliography<a class="headerlink" href="#macros-newcommands-cross-references-index-and-bibliography" title="Permalink to this headline">¶</a></h3>
<p>DocOnce supports a type of macros via a LaTeX-style <em>newcommand</em>
construction.  The newcommands are defined in files with names
<code class="docutils literal"><span class="pre">newcommands*.tex</span></code>, using standard LaTeX syntax. Only newcommands
for use inside math environments are supported.</p>
<p>Labels, corss-references, citations, and support of an index and
bibliography are much inspired by LaTeX syntax, but DocOnce features
no backslashes. Use labels for sections and equations only, and
preceed the reference by &#8220;Section&#8221; or &#8220;Chapter&#8221;, or in case of
an equation, surround the reference by parenthesis.</p>
<p>Here is an example:</p>
<div class="highlight-text"><div class="highlight"><pre>===== My Section =====
label{sec:mysec}

idx{key equation} idx{$\u$ conservation}

We refer to Section ref{sec:yoursec} for background material on
the *key equation*. Here we focus on the extension

# \Ddt, \u and \mycommand are defined in newcommands_keep.tex

!bt
\begin{equation}
\Ddt{\u} = \mycommand{v},
label{mysec:eq:Dudt}
\end{equation}
!et
where $\Ddt{\u}$ is the material derivative of $\u$.
Equation (ref{mysec:eq:Dudt}) is important in a number
of contexts, see cite{Larsen_et_al_2002,Johnson_Friedman_2010a}.
Also, cite{Miller_2000} supports such a view.

As see in Figure ref{mysec:fig:myfig}, the key equation
features large, smooth regions *and* abrupt changes.

FIGURE: [fig/myfile, width=600 frac=0.9] My figure. label{mysec:fig:myfig}

===== References =====

BIBFILE: papers.pub
</pre></div>
</div>
<p>DocOnce applies <a class="reference external" href="https://bitbucket.org/logg/publish">Publish</a> for specifying bibliographies because
this tool has more functionality than BibTeX, but any BibTeX database can
be automatically converted to the simple Publish format.</p>
<p>For further details on functionality and
syntax we refer to the <code class="docutils literal"><span class="pre">doc/manual/manual.do.txt</span></code> file
in the DocOnce source and a <a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/manual/html/">Sphinx version</a> of this document.</p>
</div>
</div>
<div class="section" id="from-doconce-to-other-formats">
<span id="doconce2formats"></span><h2>From DocOnce to Other Formats<a class="headerlink" href="#from-doconce-to-other-formats" title="Permalink to this headline">¶</a></h2>
<p>We refer to the manual for detailed information on how to compile a DocOnce
document to various formats. Here we just give a glimpse of the
possibilities.</p>
<div class="section" id="example-making-an-html-file">
<h3>Example: Making an HTML File<a class="headerlink" href="#example-making-an-html-file" title="Permalink to this headline">¶</a></h3>
<p>Suppose you have some DocOnce text in <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code>. Here is how you
compile that document to an HTML file <code class="docutils literal"><span class="pre">mydoc.html</span></code>, which can be viewed
in a web browser:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format html mydoc --html_style=bootswatch_journal
</pre></div>
</div>
<p>There are lots of styles for HTML files, and <code class="docutils literal"><span class="pre">bootswatch_journal</span></code> is
a fancy one. There are also lots of other command-line options for
tailoring the compilation. Run <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">--help</span></code> to see a list
of all options. Those that start with <code class="docutils literal"><span class="pre">--html_</span></code> are specific for the
HTML output format.</p>
</div>
<div class="section" id="preprocessors-1">
<h3>Preprocessors          (1)<a class="headerlink" href="#preprocessors-1" title="Permalink to this headline">¶</a></h3>
<p>A DocOnce compilation has three stages:</p>
<ol class="arabic simple">
<li>The preprocessor Preprocess is applied to <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code>, resulting in <code class="docutils literal"><span class="pre">tmp_preprocess__mydoc.do.txt</span></code>.</li>
<li>The preprocessor Mako is applied to <code class="docutils literal"><span class="pre">tmp_preprocess__mydoc.do.txt</span></code>, resulting in <code class="docutils literal"><span class="pre">tmp_mako__mydoc.do.txt</span></code>.</li>
<li>The text in <code class="docutils literal"><span class="pre">tmp_mako__mydoc.do.txt</span></code> is translated to the chosen output format.</li>
</ol>
<p>The preprocessor stages are only run if you have applied preprocessor
syntax. The Preprocess program allows you to include other files
(usually other DocOnce files) in your document (nested includes are
possible). You can also have if-else branching based on variables set
on the command line. The Mako preprocessor is (much) more advanced
and features if-else tests, loops, variables, and function calls.
You can, e.g., write Python functions in Mako to make quite intelligent
output (e.g., copy computer code from a certain directory based on a
variable that tells which computer language the document is to apply).
The preprocessors are definitely one of the strongest features of
DocOnce.</p>
</div>
<div class="section" id="output-formats">
<h3>Output Formats<a class="headerlink" href="#output-formats" title="Permalink to this headline">¶</a></h3>
<p>DocOnce can be translated to many formats. For documents with much
mathematics and/or computer code the following formats are suitable:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">latex</span></code>, <code class="docutils literal"><span class="pre">pdflatex</span></code></li>
<li><code class="docutils literal"><span class="pre">html</span></code></li>
<li><code class="docutils literal"><span class="pre">sphinx</span></code></li>
<li><code class="docutils literal"><span class="pre">ipynb</span></code> (IPython/Jupyter notebooks)</li>
<li><code class="docutils literal"><span class="pre">matlabnb</span></code> (Matlab notebooks)</li>
</ul>
</div></blockquote>
<p>Other formats are</p>
<blockquote>
<div><ul class="simple">
<li>Wikis: <code class="docutils literal"><span class="pre">gwiki</span></code> (Googlecode), <code class="docutils literal"><span class="pre">cwiki</span></code> (Creole), <code class="docutils literal"><span class="pre">mwiki</span></code> (MediaWiki)</li>
<li><code class="docutils literal"><span class="pre">plain</span></code> (pure ascii)</li>
<li><code class="docutils literal"><span class="pre">pandoc</span></code> (various Markdown formats)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="slides">
<h3>Slides<a class="headerlink" href="#slides" title="Permalink to this headline">¶</a></h3>
<p>DocOnce has strong support for writing slides, see the
<a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/slides/demo/index.html">slides demo</a>
for examples. Each slide starts with
a subsection heading (5 <code class="docutils literal"><span class="pre">=</span></code>), preceded by <code class="docutils literal"><span class="pre">!split</span></code> to indicate a
new slide. Section headings are used to mark parts of the presentation.
The slides are compiled as any other DocOnce file, but there is usually
a second step where the text is modified to become a proper slide text
in the chosen output format. We refer to the manual for details and
the</p>
<p>Several popular slide formats are supported:</p>
<blockquote>
<div><ul class="simple">
<li>LaTeX Beamer</li>
<li>HTML5: reveal.js, deck.js, CSSS</li>
<li>Markdown: Remark</li>
<li>Plain HTML</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="demos">
<h2>Demos<a class="headerlink" href="#demos" title="Permalink to this headline">¶</a></h2>
<p>The current text is generated from a DocOnce format stored in the file</p>
<div class="highlight-text"><div class="highlight"><pre>doc/tutorial/tutorial.do.txt
</pre></div>
</div>
<p>The file <code class="docutils literal"><span class="pre">make.sh</span></code> in the <code class="docutils literal"><span class="pre">tutorial</span></code> directory of the
DocOnce source code contains a demo of how to produce a variety of
formats.  The source of this tutorial, <code class="docutils literal"><span class="pre">tutorial.do.txt</span></code> is the
starting point.  Running <code class="docutils literal"><span class="pre">make.sh</span></code> and studying the various generated
files and comparing them with the original <code class="docutils literal"><span class="pre">tutorial.do.txt</span></code> file,
gives a quick introduction to how DocOnce is used in a real case.</p>
<p>A <a class="reference external" href="http://hplgit.github.io/teamods/writing_reports/index.html">short scientific report</a> demonstrates
the vast choice of output formats and settings that are available.</p>
<p>There is also a demo of different <a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/slides/demo/index.html">slide formats</a>.</p>
</div>
<div class="section" id="installation-of-doconce-and-its-dependencies">
<span id="install-doconce"></span><h2>Installation of DocOnce and its Dependencies<a class="headerlink" href="#installation-of-doconce-and-its-dependencies" title="Permalink to this headline">¶</a></h2>
<p id="index-0">Below, we explain the manual installation of all software that may be
needed when working with DocOnce documents.
The impatient way to install everything that is needed is to use
Anaconda Python and the <code class="docutils literal"><span class="pre">conda</span></code> program:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; conda install --channel johannr doconce
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">conda</span></code> package is available for Mac and Linux only.</p>
<p>If you do not want to use Anaconda and are
on a Debian-based Linux
computer (running, e.g., Ubuntu), you can instead run the Bash script
<a class="reference external" href="https://raw.githubusercontent.com/hplgit/doconce/master/doc/src/manual/install_doconce.sh">install_doconce.sh</a> or the equivalent Python script
<a class="reference external" href="https://raw.githubusercontent.com/hplgit/doconce/master/doc/src/manual/install_doconce.py">install_doconce.py</a>.
These scripts gives a comprehensive installation. Some users will prefer to
install just what is needed for them, and this is explained below.</p>
<div class="admonition-version-control-systems-are-needed admonition">
<p class="first admonition-title">Version control systems are needed</p>
<p class="last">The coming installation instructions require that the version control systems
Subversion, Mercurial, and Git are installed on your computer.</p>
</div>
<div class="admonition-what-about-mac-and-windows admonition">
<p class="first admonition-title">What about Mac and Windows</p>
<p class="last">DocOnce is primarily tested on GNU/Debian Linux systems, but also to
a minor extent on Mac OS X. Experience with Windows is limited.
Since most packages are Python-based and can be installed via <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span></code>
no problems should arise on Mac and Windows. However, some of the
image processing tools and spell checking apply Unix-specific software.</p>
</div>
<p>You can omit reading the next sections if you rely on <code class="docutils literal"><span class="pre">conda</span></code> or
<code class="docutils literal"><span class="pre">apt-get</span> <span class="pre">install</span></code> commands in the Bash script for installing DocOnce.</p>
<div class="section" id="doconce">
<h3>DocOnce<a class="headerlink" href="#doconce" title="Permalink to this headline">¶</a></h3>
<p>DocOnce itself is pure Python code hosted at <a class="reference external" href="https://github.com/hplgit/doconce">https://github.com/hplgit/doconce</a>.
Installation can be done via</p>
<div class="highlight-text"><div class="highlight"><pre>sudo pip install -e git+https://github.com/hplgit/doconce#egg=doconce
# or if doconce is already installed
sudo pip install -e git+https://github.com/hplgit/doconce#egg=doconce --upgrade
</pre></div>
</div>
<p>However, the recommended approach is to have a copy of the source on
the local computer and run <code class="docutils literal"><span class="pre">setup.py</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>git clone git@github.com:hplgit/doconce.git
cd doconce
sudo python setup.py install
cd ..
</pre></div>
</div>
<p>Since DocOnce is frequently updated, it becomes necessary to ensure
that you work with the most recent version:</p>
<div class="highlight-text"><div class="highlight"><pre>cd doconce
git pull origin master
sudo python setup.py install
</pre></div>
</div>
</div>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>Producing HTML documents, plain text, pandoc-extended Markdown,
and wikis can be done without installing any other
software. However, if you want other formats as output
(LaTeX, Sphinx, reStructuredText) and assisting utilities such
as preprocesors, spellcheck, file differences, bibliographies,
and so on, a lot of extra software must be installed.</p>
<div class="section" id="python-v2-7">
<h4>Python v2.7<a class="headerlink" href="#python-v2-7" title="Permalink to this headline">¶</a></h4>
<p>First you need Python version 2.7 and the <code class="docutils literal"><span class="pre">pip</span></code> installation program.
Unless you already have these, we recommend to install a comprehensive
Python bundle like <a class="reference external" href="https://store.continuum.io/cshop/anaconda/">Anaconda</a>.</p>
<p>You do not need more software if you avoid using preprocessors, there
is no bibliography, and you stick to the output formats LaTeX and HTML
(you need of course LaTeX installed to process <code class="docutils literal"><span class="pre">.tex</span></code> files).</p>
</div>
<div class="section" id="preprocessors-2">
<h4>Preprocessors          (2)<a class="headerlink" href="#preprocessors-2" title="Permalink to this headline">¶</a></h4>
<p>If you make use of the <a class="reference external" href="https://github.com/hplgit/preprocess">Preprocess</a>
preprocessor, this program must be installed:</p>
<div class="highlight-text"><div class="highlight"><pre>pip install -e \
   git+https://github.com/hplgit/preprocess#egg=preprocess --upgrade
</pre></div>
</div>
<p>A much more advanced alternative to Preprocess is
<a class="reference external" href="http://www.makotemplates.org">Mako</a>. Its installation is done by</p>
<div class="highlight-text"><div class="highlight"><pre>pip install Mako
</pre></div>
</div>
<p>It is recommended to install both Preprocess and Mako.</p>
<p>Note that neither Preprocess nor Mako is run if you do not have
preprocessor directives in your DocOnce source. That is, you only need
this extra software if you make active use of preprocessors.</p>
</div>
<div class="section" id="bibliography">
<h4>Bibliography<a class="headerlink" href="#bibliography" title="Permalink to this headline">¶</a></h4>
<p>The Python package <a class="reference external" href="https://bitbucket.org/logg/publish">Publish</a> is needed if you use a bibliography
in your document (<code class="docutils literal"><span class="pre">cite</span></code> commands and a <code class="docutils literal"><span class="pre">BIBFILE:</span></code> specification).
The installation is done by</p>
<div class="highlight-text"><div class="highlight"><pre>pip install -e hg+https://bitbucket.org/logg/publish#egg=publish
</pre></div>
</div>
</div>
<div class="section" id="image-file-handling">
<h4>Image file handling<a class="headerlink" href="#image-file-handling" title="Permalink to this headline">¶</a></h4>
<p>Different output formats require different formats of image files.
For example, PDF or PNG is used for <code class="docutils literal"><span class="pre">pdflatex</span></code>,
PostScript for
<code class="docutils literal"><span class="pre">latex</span></code>, while HTML needs JPEG, GIF, or PNG formats.  DocOnce
calls up programs from the ImageMagick suite for converting image
files to a proper format if needed. The <a class="reference external" href="http://www.imagemagick.org/script/index.php">ImageMagick suite</a> can be installed on all
major platforms.  On Debian Linux (including Ubuntu) systems one can
simply write</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install imagemagick
</pre></div>
</div>
<p>The convenience program <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">combine_images</span></code>, for combining several
images into one, will use <code class="docutils literal"><span class="pre">montage</span></code> and <code class="docutils literal"><span class="pre">convert</span></code> from ImageMagick and
the <code class="docutils literal"><span class="pre">pdftk</span></code>, <code class="docutils literal"><span class="pre">pdfnup</span></code>, and <code class="docutils literal"><span class="pre">pdfcrop</span></code> programs from the <code class="docutils literal"><span class="pre">texlive-extra-utils</span></code>
Debian package. The latter gets installed by</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install texlive-extra-utils
</pre></div>
</div>
<p>Automatic image conversion from EPS to PDF calls up <code class="docutils literal"><span class="pre">epstopdf</span></code>, which
can be installed by</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install texlive-font-utils
</pre></div>
</div>
</div>
<div class="section" id="spellcheck">
<h4>Spellcheck<a class="headerlink" href="#spellcheck" title="Permalink to this headline">¶</a></h4>
<p>The utility <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">spellcheck</span></code> applies the <code class="docutils literal"><span class="pre">ispell</span></code> program for
spellcheck. On Debian (including Ubuntu) it is installed by</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install ispell
</pre></div>
</div>
</div>
<div class="section" id="ptex2tex-for-latex-output">
<h4>Ptex2tex for LaTeX Output<a class="headerlink" href="#ptex2tex-for-latex-output" title="Permalink to this headline">¶</a></h4>
<p>Originally, DocOnce relied on the <a class="reference external" href="http://code.google.com/p/ptex2tex">ptex2tex</a> program for very flexible choice of typesetting of
verbatim code blocks. A simplified version, <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code>, is bundled
with DocOnce. However, even greater flexibility is now offered by the
<code class="docutils literal"><span class="pre">--latex_code_style=</span></code> option to <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> so unless you already are
a <code class="docutils literal"><span class="pre">ptex2tex</span></code> user, it is recommended to forget about <code class="docutils literal"><span class="pre">ptex2tex</span></code> and
just use the <code class="docutils literal"><span class="pre">--latex_code_style=</span></code> option.</p>
<p>The stand-alone <code class="docutils literal"><span class="pre">ptex2tex</span></code> program is installed by</p>
<div class="highlight-text"><div class="highlight"><pre>svn checkout http://ptex2tex.googlecode.com/svn/trunk/ ptex2tex
cd ptex2tex
sudo python setup.py install
</pre></div>
</div>
<p>It may happen that you need additional style files, you can run
a script, <code class="docutils literal"><span class="pre">cp2texmf.sh</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>cd latex
sh cp2texmf.sh  # copy stylefiles to ~/texmf directory
cd ../..
</pre></div>
</div>
<p>This script copies some special stylefiles that
that <code class="docutils literal"><span class="pre">ptex2tex</span></code> potentially makes use of. Some more standard stylefiles
are also needed. These are installed by</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install texlive
</pre></div>
</div>
<p>on Debian Linux (including Ubuntu) systems. TeXShop on Mac comes with
the necessary stylefiles (if not, they can be found by googling and installed
manually in the <code class="docutils literal"><span class="pre">~/texmf/tex/latex/misc</span></code> directory).</p>
<p>Note that the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code> command, which needs no installation
beyond DocOnce itself, can be used as a simpler alternative to the <code class="docutils literal"><span class="pre">ptex2tex</span></code>
program.</p>
</div>
<div class="section" id="pygments-and-the-minted-code-style">
<h4>Pygments and the Minted Code Style<a class="headerlink" href="#pygments-and-the-minted-code-style" title="Permalink to this headline">¶</a></h4>
<p>The <em>minted</em> LaTeX style is
popular for typesetting code.
This style requires the package <a class="reference external" href="http://pygments.org">Pygments</a>
to be installed. On Debian Linux, the simplest approach is to
install <code class="docutils literal"><span class="pre">sphinx</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>pip install sphinx
</pre></div>
</div>
<p>All use of the minted style requires the <code class="docutils literal"><span class="pre">-shell-escape</span></code> command-line
argument when running LaTeX, i.e., <code class="docutils literal"><span class="pre">pdflatex</span> <span class="pre">-shell-escape</span></code>.</p>
<p>Inline comments apply the <code class="docutils literal"><span class="pre">todonotes</span></code> LaTeX package if the option
<code class="docutils literal"><span class="pre">--latex_todonotes</span></code> is given.  The <code class="docutils literal"><span class="pre">todonotes</span></code> package requires
several other packages: <code class="docutils literal"><span class="pre">xcolor</span></code>, <code class="docutils literal"><span class="pre">ifthen</span></code>, <code class="docutils literal"><span class="pre">xkeyval</span></code>, <code class="docutils literal"><span class="pre">tikz</span></code>, <code class="docutils literal"><span class="pre">calc</span></code>,
<code class="docutils literal"><span class="pre">graphicx</span></code>, and <code class="docutils literal"><span class="pre">setspace</span></code>. The relevant Debian packages for
installing all this are listed below.</p>
</div>
<div class="section" id="latex-packages">
<h4>LaTeX packages<a class="headerlink" href="#latex-packages" title="Permalink to this headline">¶</a></h4>
<p>Many LaTeX packages are potentially needed, depending on various
constructions in the text and command-line options used when compling DocOnce to
LaTeX. The
standard packages always required are <code class="docutils literal"><span class="pre">relsize</span></code>, <code class="docutils literal"><span class="pre">makeidx</span></code>,
<code class="docutils literal"><span class="pre">setspace</span></code>, <code class="docutils literal"><span class="pre">color</span></code>, <code class="docutils literal"><span class="pre">amsmath</span></code>, <code class="docutils literal"><span class="pre">amsfonts</span></code>, <code class="docutils literal"><span class="pre">xcolor</span></code>, <code class="docutils literal"><span class="pre">bm</span></code>,
<code class="docutils literal"><span class="pre">microtype</span></code>, <code class="docutils literal"><span class="pre">inputenc</span></code>, and <code class="docutils literal"><span class="pre">hyperref</span></code>.
Optional packages that might be included in the <code class="docutils literal"><span class="pre">.tex</span></code> output are <code class="docutils literal"><span class="pre">minted</span></code>,
<code class="docutils literal"><span class="pre">listings</span></code>, <code class="docutils literal"><span class="pre">fancyvrb</span></code>, <code class="docutils literal"><span class="pre">xunicode</span></code>, <code class="docutils literal"><span class="pre">inputenc</span></code>, <code class="docutils literal"><span class="pre">helvet</span></code>, <code class="docutils literal"><span class="pre">mathpazo</span></code>, <code class="docutils literal"><span class="pre">wrapfig</span></code>,
<code class="docutils literal"><span class="pre">calc</span></code>, <code class="docutils literal"><span class="pre">ifthen</span></code>, <code class="docutils literal"><span class="pre">xkeyval</span></code>, <code class="docutils literal"><span class="pre">tikz</span></code>, <code class="docutils literal"><span class="pre">graphicx</span></code>, <code class="docutils literal"><span class="pre">setspace</span></code>, <code class="docutils literal"><span class="pre">shadow</span></code>,
<code class="docutils literal"><span class="pre">disable</span></code>, <code class="docutils literal"><span class="pre">todonotes</span></code>, <code class="docutils literal"><span class="pre">lineno</span></code>, <code class="docutils literal"><span class="pre">xr</span></code>, <code class="docutils literal"><span class="pre">framed</span></code>, <code class="docutils literal"><span class="pre">mdframe</span></code>,
<code class="docutils literal"><span class="pre">movie15</span></code>, <code class="docutils literal"><span class="pre">a4paper</span></code>, and <code class="docutils literal"><span class="pre">a6paper</span></code>.</p>
<p>Relevant Debian packages that gives you all of these LaTeX packages are</p>
<div class="highlight-text"><div class="highlight"><pre>texlive
texlive-extra-utils
texlive-latex-extra
texlive-font-utils
</pre></div>
</div>
<p>Alternatively, one may pull in <code class="docutils literal"><span class="pre">texlive-full</span></code> to get all available
style files.</p>
<p>If you want to use the <em>anslistings</em> code environment with <code class="docutils literal"><span class="pre">ptex2tex</span></code>
(<code class="docutils literal"><span class="pre">.ptex2tex.cfg</span></code> styles <code class="docutils literal"><span class="pre">Python_ANS</span></code>, <code class="docutils literal"><span class="pre">Python_ANSt</span></code>, <code class="docutils literal"><span class="pre">Cpp_ANS</span></code>, etc.) or
<code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code> (<code class="docutils literal"><span class="pre">envir=ans</span></code> or <code class="docutils literal"><span class="pre">envir=ans:nt</span></code>), you need the
<code class="docutils literal"><span class="pre">anslistings.sty</span></code> file. It can be obtained from
the <a class="reference external" href="https://code.google.com/p/ptex2tex/source/browse/trunk/latex/styles/with_license/anslistings.sty">ptex2tex source</a>. The same code style is in
&#8220;modern DocOnce&#8221; just implemented by the command-line option</p>
<div class="highlight-text"><div class="highlight"><pre>&quot;--latex_code_style=default:lst[style=yellow2_fb]&quot;
</pre></div>
</div>
</div>
<div class="section" id="sphinx-or-restructuredtext-output">
<h4>Sphinx or reStructuredText Output<a class="headerlink" href="#sphinx-or-restructuredtext-output" title="Permalink to this headline">¶</a></h4>
<p>Output to <code class="docutils literal"><span class="pre">sphinx</span></code> or <code class="docutils literal"><span class="pre">rst</span></code> requires the
<a class="reference external" href="http://sphinx.pocoo.org">Sphinx software</a>,
installed by</p>
<div class="highlight-text"><div class="highlight"><pre>pip install sphinx --upgrade
</pre></div>
</div>
<p>DocOnce comes with many Sphinx themes that are not part of the
standard Sphinx source distribution:</p>
<blockquote>
<div><ul class="simple">
<li>cloud and redcloud: <a class="reference external" href="https://bitbucket.org/ecollins/cloud_sptheme">https://bitbucket.org/ecollins/cloud_sptheme</a></li>
<li>bootstrap: <a class="reference external" href="https://github.com/ryan-roemer/sphinx-bootstrap-theme">https://github.com/ryan-roemer/sphinx-bootstrap-theme</a></li>
<li>solarized: <a class="reference external" href="https://bitbucket.org/miiton/sphinxjp.themes.solarized">https://bitbucket.org/miiton/sphinxjp.themes.solarized</a></li>
<li>impressjs: <a class="reference external" href="https://github.com/shkumagai/sphinxjp.themes.impressjs">https://github.com/shkumagai/sphinxjp.themes.impressjs</a></li>
<li>sagecellserver: <a class="reference external" href="https://github.com/kriskda/sphinx-sagecell">https://github.com/kriskda/sphinx-sagecell</a></li>
</ul>
</div></blockquote>
<p>Appropriate installation commands for these themes are</p>
<div class="highlight-text"><div class="highlight"><pre>pip install -e hg+https://bitbucket.org/ecollins/cloud_sptheme#egg=cloud_sptheme
pip install -e git+https://github.com/ryan-roemer/sphinx-bootstrap-theme#egg=sphinx-bootstrap-theme
pip install -e hg+https://bitbucket.org/miiton/sphinxjp.themes.solarized#egg=sphinxjp.themes.solarized
pip install -e git+https://github.com/shkumagai/sphinxjp.themes.impressjs#egg=sphinxjp.themes.impressjs
pip install -e git+https://github.com/kriskda/sphinx-sagecell#egg=sphinx-sagecell
</pre></div>
</div>
<p>It can also be handy to have special typesetting of IPython sessions:</p>
<div class="highlight-text"><div class="highlight"><pre>pip install -e git+https://bitbucket.org/hplbit/pygments-ipython-console#egg=pygments-ipython-console
</pre></div>
</div>
<p>To make OpenOffice or LibreOffice documents from <code class="docutils literal"><span class="pre">rst</span></code> output, you
will need more software, typically the following on a Debian system:</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install unovonv libreoffice libreoffice-dmaths
</pre></div>
</div>
</div>
<div class="section" id="markdown-and-pandoc-output">
<h4>Markdown and Pandoc Output<a class="headerlink" href="#markdown-and-pandoc-output" title="Permalink to this headline">¶</a></h4>
<p>The DocOnce format <code class="docutils literal"><span class="pre">pandoc</span></code> outputs the document in various Markdown
versions: the Pandoc
extended Markdown format (which via the <code class="docutils literal"><span class="pre">pandoc</span></code> program can be
translated to a range of other formats), strict Markdown, and
GitHub-flavored Markdown. Installation of <a class="reference external" href="http://johnmacfarlane.net/pandoc/">Pandoc</a>, written in Haskell, is most
easily done by</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install pandoc
</pre></div>
</div>
<p>on Debian (Ubuntu) systems.</p>
</div>
<div class="section" id="epydoc-output">
<h4>Epydoc Output<a class="headerlink" href="#epydoc-output" title="Permalink to this headline">¶</a></h4>
<p>When the output format is <code class="docutils literal"><span class="pre">epydoc</span></code> one needs that program too, installed
by</p>
<div class="highlight-text"><div class="highlight"><pre>svn co https://epydoc.svn.sourceforge.net/svnroot/epydoc/trunk/epydoc epydoc
cd epydoc
sudo make install
cd ..
</pre></div>
</div>
<p><strong>Remark.</strong>
Several of the packages above installed from source code
are also available in Debian-based system through the
<code class="docutils literal"><span class="pre">apt-get</span> <span class="pre">install</span></code> command. However, we recommend installation directly
from the version control system repository as there might be important
updates and bug fixes. For <code class="docutils literal"><span class="pre">svn</span></code> directories, go to the directory,
run <code class="docutils literal"><span class="pre">svn</span> <span class="pre">update</span></code>, and then <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code>. For
Mercurial (<code class="docutils literal"><span class="pre">hg</span></code>) directories, go to the directory, run
<code class="docutils literal"><span class="pre">hg</span> <span class="pre">pull;</span> <span class="pre">hg</span> <span class="pre">update</span></code>, and then <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code>.</p>
</div>
<div class="section" id="analyzing-file-differences">
<h4>Analyzing file differences<a class="headerlink" href="#analyzing-file-differences" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">diff</span> <span class="pre">file1</span> <span class="pre">file</span> <span class="pre">prog</span></code> command for illustrating differences between
two files <code class="docutils literal"><span class="pre">file1</span></code> and <code class="docutils literal"><span class="pre">file2</span></code> using the program <code class="docutils literal"><span class="pre">prog</span></code> requires <code class="docutils literal"><span class="pre">prog</span></code>
to be installed. By default, <code class="docutils literal"><span class="pre">prog</span></code> is <code class="docutils literal"><span class="pre">difflib</span></code> which comes with Python
and is always present if you have DocOnce installed. Another choice, <code class="docutils literal"><span class="pre">diff</span></code>,
should be available on all Unix/Linux systems. Other choices, their
URL, and their <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span></code> command on Debian (Ubuntu) systems
appear in the table below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="49%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Program</th>
<th class="head">URL</th>
<th class="head">Debian/Ubuntu install</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">pdiff</span></code></td>
<td><a class="reference external" href="http://www.gnu.org/software/a2ps/">a2ps</a> <a class="reference external" href="http://www.gnu.org/software/wdiff/">wdiff</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">a2ps</span> <span class="pre">wdiff</span> <span class="pre">texlive-latex-extra</span> <span class="pre">texlive-latex-recommended</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">latexdiff</span></code></td>
<td><a class="reference external" href="http://www.ctan.org/pkg/latexdiff">latexdiff</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">latexdiff</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">kdiff3</span></code></td>
<td><a class="reference external" href="http://kdiff3.sourceforge.net/">kdiff3</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">kdiff3</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">diffuse</span></code></td>
<td><a class="reference external" href="http://diffuse.sourceforge.net/">diffuse</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">diffuse</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">xxdiff</span></code></td>
<td><a class="reference external" href="http://xxdiff.sourceforge.net/local/">xxdiff</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">xxdiff</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">meld</span></code></td>
<td><a class="reference external" href="http://meldmerge.org/">meld</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">meld</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">tkdiff.tcl</span></code></td>
<td><a class="reference external" href="https://sourceforge.net/projects/tkdiff/">tkdiff</a></td>
<td>not in Debian</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <center>
            <p class="logo"><a href="http://cbc.simula.no/" title="Go to Center for Biomedical Computing">
              <img class="logo" src="_static/cbc_logo.png" alt="Logo"/>
            </a></p>
            </center>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">DocOnce: Document Once, Include Anywhere</a><ul>
<li><a class="reference internal" href="#some-doconce-features">Some DocOnce Features</a></li>
<li><a class="reference internal" href="#what-does-doconce-look-like">What Does DocOnce Look Like?</a><ul>
<li><a class="reference internal" href="#what-can-doconce-be-used-for">What Can DocOnce Be Used For?</a></li>
<li><a class="reference internal" href="#basic-syntax">Basic Syntax</a></li>
</ul>
</li>
<li><a class="reference internal" href="#first-a-section-heading-with-7-characters">First a Section Heading with 7 = Characters</a><ul>
<li><a class="reference internal" href="#then-a-subsection-heading-with-5-characters">Then a Subsection Heading with 5 = Characters</a><ul>
<li><a class="reference internal" href="#finally-a-subsubection-heading-with-3-characters">Finally a Subsubection Heading with 3 = Characters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a-subsection-with-sample-text">A Subsection with Sample Text</a></li>
<li><a class="reference internal" href="#mathematics">Mathematics</a></li>
<li><a class="reference internal" href="#computer-code">Computer Code</a></li>
<li><a class="reference internal" href="#macros-newcommands-cross-references-index-and-bibliography">Macros (Newcommands), Cross-References, Index, and Bibliography</a></li>
</ul>
</li>
<li><a class="reference internal" href="#from-doconce-to-other-formats">From DocOnce to Other Formats</a><ul>
<li><a class="reference internal" href="#example-making-an-html-file">Example: Making an HTML File</a></li>
<li><a class="reference internal" href="#preprocessors-1">Preprocessors          (1)</a></li>
<li><a class="reference internal" href="#output-formats">Output Formats</a></li>
<li><a class="reference internal" href="#slides">Slides</a></li>
</ul>
</li>
<li><a class="reference internal" href="#demos">Demos</a></li>
<li><a class="reference internal" href="#installation-of-doconce-and-its-dependencies">Installation of DocOnce and its Dependencies</a><ul>
<li><a class="reference internal" href="#doconce">DocOnce</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a><ul>
<li><a class="reference internal" href="#python-v2-7">Python v2.7</a></li>
<li><a class="reference internal" href="#preprocessors-2">Preprocessors          (2)</a></li>
<li><a class="reference internal" href="#bibliography">Bibliography</a></li>
<li><a class="reference internal" href="#image-file-handling">Image file handling</a></li>
<li><a class="reference internal" href="#spellcheck">Spellcheck</a></li>
<li><a class="reference internal" href="#ptex2tex-for-latex-output">Ptex2tex for LaTeX Output</a></li>
<li><a class="reference internal" href="#pygments-and-the-minted-code-style">Pygments and the Minted Code Style</a></li>
<li><a class="reference internal" href="#latex-packages">LaTeX packages</a></li>
<li><a class="reference internal" href="#sphinx-or-restructuredtext-output">Sphinx or reStructuredText Output</a></li>
<li><a class="reference internal" href="#markdown-and-pandoc-output">Markdown and Pandoc Output</a></li>
<li><a class="reference internal" href="#epydoc-output">Epydoc Output</a></li>
<li><a class="reference internal" href="#analyzing-file-differences">Analyzing file differences</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">DocOnce: Document Once, Include Anywhere</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tutorial.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="DocOnce: Document Once, Include Anywhere"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DocOnce: Document Once, Include Anywhere</a> &raquo;</li> 
      </ul>
    </div>
<div class="wrapper">
  <div class="footer">
    <a href="http://cbc.simula.no"><img src="_static/cbc_banner.png" width="100%"><a>
    <br />
    <br />
      &copy;2015, Hans Petter Langtangen.
  </div>
</div>

  </body>
</html>